
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>moddb.pages &#8212; moddb 1.0 documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for moddb.pages</h1><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">.boxes</span> <span class="k">import</span> <span class="n">CommentList</span><span class="p">,</span> <span class="n">Comment</span><span class="p">,</span> <span class="n">Thumbnail</span><span class="p">,</span> <span class="n">UserProfile</span><span class="p">,</span> <span class="n">UserStatistics</span><span class="p">,</span> \
                   <span class="n">Profile</span><span class="p">,</span> <span class="n">Statistics</span><span class="p">,</span> <span class="n">Style</span><span class="p">,</span> <span class="n">PartialArticle</span><span class="p">,</span> <span class="n">Option</span><span class="p">,</span> <span class="n">PlatformStatistics</span>
<span class="kn">from</span> <span class="nn">.enums</span> <span class="k">import</span> <span class="n">ThumbnailType</span><span class="p">,</span> <span class="n">SearchCategory</span><span class="p">,</span> <span class="n">TimeFrame</span><span class="p">,</span> <span class="n">FileCategory</span><span class="p">,</span> <span class="n">AddonCategory</span><span class="p">,</span> \
                   <span class="n">MediaCategory</span><span class="p">,</span> <span class="n">JobSkill</span><span class="p">,</span> <span class="n">ArticleType</span><span class="p">,</span> <span class="n">Difficulty</span><span class="p">,</span> <span class="n">TutorialType</span><span class="p">,</span> <span class="n">Licence</span>
<span class="kn">from</span> <span class="nn">.utils</span> <span class="k">import</span> <span class="n">soup</span><span class="p">,</span> <span class="n">join</span><span class="p">,</span> <span class="n">LOGGER</span><span class="p">,</span> <span class="n">get_date</span><span class="p">,</span> <span class="n">get_views</span><span class="p">,</span> <span class="n">get_type</span><span class="p">,</span> <span class="n">concat_docs</span><span class="p">,</span> <span class="n">polls_json_file</span><span class="p">,</span> \
                   <span class="n">request</span>

<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">bs4</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="k">import</span> <span class="n">List</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Union</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Mod&#39;</span><span class="p">,</span> <span class="s1">&#39;Game&#39;</span><span class="p">,</span> <span class="s1">&#39;Engine&#39;</span><span class="p">,</span> <span class="s1">&#39;File&#39;</span><span class="p">,</span> <span class="s1">&#39;Addon&#39;</span><span class="p">,</span> <span class="s1">&#39;Media&#39;</span><span class="p">,</span> <span class="s1">&#39;Article&#39;</span><span class="p">,</span>
           <span class="s1">&#39;Team&#39;</span><span class="p">,</span> <span class="s1">&#39;Group&#39;</span><span class="p">,</span> <span class="s1">&#39;Job&#39;</span><span class="p">,</span> <span class="s1">&#39;Blog&#39;</span><span class="p">,</span> <span class="s1">&#39;User&#39;</span><span class="p">,</span> <span class="s1">&#39;FrontPage&#39;</span><span class="p">,</span> <span class="s1">&#39;Review&#39;</span><span class="p">,</span>
           <span class="s1">&#39;Platform&#39;</span><span class="p">,</span> <span class="s1">&#39;Poll&#39;</span><span class="p">,</span> <span class="s1">&#39;Software&#39;</span><span class="p">,</span> <span class="s1">&#39;Hardware&#39;</span><span class="p">]</span>

<span class="c1">#ToDo: timeframe? could piggy back of get_date</span>

<span class="k">class</span> <span class="nc">Base</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;An abstract class that implements the attributes present on nearly every page. In addition, it implements</span>
<span class="sd">    some shared hidden methods and the top level get_comments method.</span>

<span class="sd">    Parameters</span>
<span class="sd">    -----------</span>
<span class="sd">    html : bs4.BeautifulSoup</span>
<span class="sd">        The html containing the comments</span>

<span class="sd">    Attributes</span>
<span class="sd">    -----------</span>
<span class="sd">    id : int</span>
<span class="sd">        The id of the page</span>
<span class="sd">    url : str</span>
<span class="sd">        The url of the page</span>
<span class="sd">    comments : CommentList</span>
<span class="sd">        The comments scrapped on this list in order.</span>
<span class="sd">    report : str</span>
<span class="sd">        URL to report the page</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="n">itemprop</span><span class="o">=</span><span class="s2">&quot;mainEntityOfPage&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">string</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;meta&quot;</span><span class="p">,</span> <span class="nb">property</span><span class="o">=</span><span class="s2">&quot;og:title&quot;</span><span class="p">)[</span><span class="s2">&quot;content&quot;</span><span class="p">]</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;siteareaid=(\d*)&quot;</span><span class="p">,</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="s2">&quot;Report&quot;</span><span class="p">)[</span><span class="s2">&quot;href&quot;</span><span class="p">])[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> has no id&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;meta&quot;</span><span class="p">,</span> <span class="nb">property</span><span class="o">=</span><span class="s2">&quot;og:url&quot;</span><span class="p">)[</span><span class="s2">&quot;content&quot;</span><span class="p">]</span>

        <span class="c1">#ToDo: check if works</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">report</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="s2">&quot;Report&quot;</span><span class="p">)[</span><span class="s2">&quot;href&quot;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">report</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> cannot be reported&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">comments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_comments</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">f</span><span class="s2">&quot;&lt;</span><span class="si">{self.__class__.__name__}</span><span class="s2"> name=</span><span class="si">{self.name}</span><span class="s2">&gt;&quot;</span>

    <span class="k">def</span> <span class="nf">_get_comments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html</span> <span class="p">:</span> <span class="n">bs4</span><span class="o">.</span><span class="n">BeautifulSoup</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CommentList</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Extracts the comments from an html page and adds them to a CommentList. In addition</span>
<span class="sd">        this command also adds them to the comments children as need be.</span>

<span class="sd">        Parameters</span>
<span class="sd">        -----------</span>
<span class="sd">        html : bs4.BeautifulSoup</span>
<span class="sd">            The html containing the comments</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">comments_raw</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;row&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">comments</span> <span class="o">=</span> <span class="n">CommentList</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">raw</span> <span class="ow">in</span> <span class="n">comments_raw</span><span class="p">:</span>
            <span class="n">comment</span> <span class="o">=</span> <span class="n">Comment</span><span class="p">(</span><span class="n">raw</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">comment</span><span class="o">.</span><span class="n">position</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">comments</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">comment</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">comment</span><span class="o">.</span><span class="n">position</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">comments</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">children</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">comment</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">comments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">comment</span><span class="p">)</span>
                    
        <span class="k">return</span> <span class="n">comments</span>

    <span class="k">def</span> <span class="nf">_get_blogs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span> <span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{})</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;Blog&quot;</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Hidden method to get blogs of a model. We hide it because not every model that inherits from Base</span>
<span class="sd">        has blogs but instead of making a second inheritance we just implement the top level command `get_blogs`</span>
<span class="sd">        individually in each model that needs it and call this function.&quot;&quot;&quot;</span>

        <span class="n">html</span> <span class="o">=</span> <span class="n">soup</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;</span><span class="si">{self.url}</span><span class="s2">/blogs/page/</span><span class="si">{index}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
        <span class="n">table</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;articlesbrowse&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;table&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">table</span><span class="p">[</span><span class="s2">&quot;class&quot;</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>

        <span class="n">raw_blogs</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">)[</span><span class="mi">2</span><span class="p">:]</span>
        <span class="n">blogs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">e</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">raw_blogs</span><span class="p">)):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">heading</span> <span class="o">=</span> <span class="n">raw_blogs</span><span class="p">[</span><span class="n">e</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                <span class="k">break</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">text</span> <span class="o">=</span> <span class="n">raw_blogs</span><span class="p">[</span><span class="n">e</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                <span class="n">text</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;class&quot;</span><span class="p">:</span> <span class="s2">&quot;None&quot;</span><span class="p">}</span>

            <span class="n">blog_obj</span> <span class="o">=</span> <span class="n">Blog</span><span class="p">(</span><span class="n">heading</span><span class="o">=</span><span class="n">heading</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">)</span>
            <span class="n">blogs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">blog_obj</span><span class="p">)</span>
            <span class="n">e</span> <span class="o">+=</span> <span class="mi">2</span>

        <span class="k">return</span> <span class="n">blogs</span>

    <span class="k">def</span> <span class="nf">_get_suggestions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html</span> <span class="p">:</span> <span class="n">bs4</span><span class="o">.</span><span class="n">BeautifulSoup</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Thumbnail</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Hidden method used to get the list of suggestions on the page. As with most things, this list of suggestions</span>
<span class="sd">        will be a list of Thumbnail objects that can be parsed individually.</span>

<span class="sd">        Parameters</span>
<span class="sd">        -----------</span>
<span class="sd">        html : bs4.BeautifulSoup</span>
<span class="sd">            The html page we are trying to parse the suggestions for</span>

<span class="sd">        Returns</span>
<span class="sd">        --------</span>
<span class="sd">        List[Thumbnail]</span>
<span class="sd">            The list of suggestions as thumbnails.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">suggestions_raw</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="s2">&quot;You may also like&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;table&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">suggestions</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">suggestions_raw</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">link</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;image&quot;</span><span class="p">)</span>
                <span class="n">suggestion_type</span> <span class="o">=</span> <span class="n">link</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;s&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">)</span>
                <span class="n">suggestion</span> <span class="o">=</span> <span class="n">Thumbnail</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">link</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span> <span class="n">url</span><span class="o">=</span><span class="n">link</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">],</span> <span class="n">image</span><span class="o">=</span><span class="n">link</span><span class="o">.</span><span class="n">img</span><span class="p">[</span><span class="s2">&quot;src&quot;</span><span class="p">],</span> <span class="nb">type</span><span class="o">=</span><span class="n">ThumbnailType</span><span class="p">[</span><span class="n">suggestion_type</span><span class="p">])</span>
                <span class="n">suggestions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">suggestion</span><span class="p">)</span>
            <span class="k">except</span> <span class="p">(</span><span class="ne">AttributeError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
                <span class="k">pass</span>

        <span class="k">return</span> <span class="n">suggestions</span>

    <span class="k">def</span> <span class="nf">_get_games</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html</span> <span class="p">:</span> <span class="n">bs4</span><span class="o">.</span><span class="n">BeautifulSoup</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Thumbnail</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Used both for Teams and Engines, returns a list of games  present on the page</span>
<span class="sd">        as Thumbnail objects.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        html : bs4.BeautifulSoup</span>
<span class="sd">            The html to extract the list of games from</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        List[Thumbnail]</span>
<span class="sd">            The list of games on the page as Thumbnail objects.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">games_raw</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">string</span><span class="o">=</span><span class="s2">&quot;Games&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">class_</span><span class="o">=</span><span class="s2">&quot;row rowcontent clear&quot;</span><span class="p">)</span>
        <span class="n">games</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">games_raw</span><span class="p">:</span>
            <span class="n">link</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;content&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">h4</span><span class="o">.</span><span class="n">a</span>
            <span class="n">image_url</span> <span class="o">=</span> <span class="n">link</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;img&quot;</span><span class="p">)[</span><span class="s2">&quot;src&quot;</span><span class="p">]</span>
            <span class="n">game</span> <span class="o">=</span> <span class="n">Thumbnail</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">link</span><span class="o">.</span><span class="n">string</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="n">link</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">],</span> <span class="n">image</span><span class="o">=</span><span class="n">image_url</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">ThumbnailType</span><span class="o">.</span><span class="n">game</span><span class="p">)</span>
            <span class="n">games</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">game</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">games</span>

    <span class="k">def</span> <span class="nf">_get_files</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html</span> <span class="p">:</span> <span class="n">bs4</span><span class="o">.</span><span class="n">BeautifulSoup</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Thumbnail</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Cache the files present on the page. Up to 5 files might be present</span>

<span class="sd">        Parameters</span>
<span class="sd">        -----------</span>
<span class="sd">        html : bs4.BeautifulSoup</span>
<span class="sd">            The page to cache the files from</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        List[Thumbnail]</span>
<span class="sd">            The list of file like thumbnails</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">files_raw</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">string</span><span class="o">=</span><span class="s2">&quot;Files&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">class_</span><span class="o">=</span><span class="s2">&quot;row rowcontent clear&quot;</span><span class="p">)</span>
        <span class="n">files</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">files_raw</span><span class="p">:</span>
            <span class="n">link</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;content&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">h4</span><span class="o">.</span><span class="n">a</span>
            <span class="n">image_url</span> <span class="o">=</span> <span class="n">link</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;img&quot;</span><span class="p">)[</span><span class="s2">&quot;src&quot;</span><span class="p">]</span>
            <span class="n">file</span> <span class="o">=</span> <span class="n">Thumbnail</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">link</span><span class="o">.</span><span class="n">string</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="n">link</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">],</span> <span class="n">image</span><span class="o">=</span><span class="n">image_url</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">ThumbnailType</span><span class="o">.</span><span class="n">file</span><span class="p">)</span>
            <span class="n">files</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">files</span>

    <span class="k">def</span> <span class="nf">_get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span> <span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">object_type</span> <span class="p">:</span> <span class="n">ThumbnailType</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">params</span> <span class="p">:</span> <span class="nb">dict</span> <span class="o">=</span> <span class="p">{})</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Thumbnail</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;This function takes a list of thumbnails of `object_type` in html and returns</span>
<span class="sd">        a list of Thumbnail of that object type.</span>

<span class="sd">        Parameters</span>
<span class="sd">        -----------</span>
<span class="sd">        url : str</span>
<span class="sd">            The url with the list</span>
<span class="sd">        object_type : ThumbnailType</span>
<span class="sd">            The type of objects to be expected. Easier to pass and hardcode then to guess</span>
<span class="sd">        params : dict</span>
<span class="sd">            A dictionnary of filters to pass on to the soup function used to filter the results.</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        List[Thumbnail]</span>
<span class="sd">            The list of objects present on the page as a list of thumbnails.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#ToDo: replace object_type by url parser that checks the url for the type</span>
        <span class="n">html</span> <span class="o">=</span> <span class="n">soup</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
        <span class="n">table</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;table&quot;</span><span class="p">)</span>
        <span class="c1">#if the table&#39;s class isn&#39;t exactly table then it&#39;s the wrong table and the list is actually empty</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">table</span><span class="p">[</span><span class="s2">&quot;class&quot;</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>

        <span class="n">objects_raw</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">)[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="n">objects</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="n">objects_raw</span><span class="p">:</span>
            <span class="n">thumbnail</span> <span class="o">=</span> <span class="n">Thumbnail</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">obj</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span> <span class="n">url</span><span class="o">=</span><span class="n">obj</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">],</span> <span class="n">image</span><span class="o">=</span><span class="n">obj</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">img</span><span class="p">[</span><span class="s2">&quot;src&quot;</span><span class="p">],</span> <span class="nb">type</span><span class="o">=</span><span class="n">object_type</span><span class="p">)</span>
            <span class="n">objects</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">thumbnail</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">objects</span>

    <span class="k">def</span> <span class="nf">_get_media</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span> <span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">html</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Thumbnail</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Hidden method used to parse media content from the page. Since the only difference is that pages </span>
<span class="sd">        with videos have one extra script that tells the window not do any sort of video playing assistance.</span>
<span class="sd">        Also used to cached all media on a page.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        index : int</span>
<span class="sd">            The index of the script containing the cached objects. 1 if it&#39;s only images, 2 if videos are</span>
<span class="sd">            also included</span>

<span class="sd">        Returns</span>
<span class="sd">        --------</span>
<span class="sd">        List[Thumbnail]</span>
<span class="sd">            List of media like thumbnails that can be parsed individually. Can be a very long list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#ToDo: check if filters affect the imagebox</span>
        <span class="n">script</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;script&quot;</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="kc">True</span><span class="p">)[</span><span class="n">index</span><span class="p">]</span>
        <span class="n">regex</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;new Array\(0, &quot;(\S*)&quot;, &quot;(\S*)&quot;&#39;</span>
        <span class="n">matches</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">regex</span><span class="p">,</span> <span class="n">script</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>

        <span class="n">name_finder</span> <span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;\/([a-z0-9-]*)#imagebox&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">Thumbnail</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">name_finder</span><span class="p">,</span> <span class="n">match</span><span class="p">[</span><span class="mi">0</span><span class="p">])[</span><span class="mi">1</span><span class="p">],</span> <span class="n">url</span><span class="o">=</span><span class="n">match</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">type</span><span class="o">=</span><span class="n">ThumbnailType</span><span class="o">.</span><span class="n">media</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="n">match</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">match</span> <span class="ow">in</span> <span class="n">matches</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_get_engines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Hidden method to get the engines showed currently on the page as a list of engine like thumbnails. Takes</span>
<span class="sd">        an entire page of html and sorts it out</span>

<span class="sd">        Parameters</span>
<span class="sd">        -----------</span>
<span class="sd">        html : bs4.BeautifulSoup</span>
<span class="sd">            The page to cache the engines from</span>

<span class="sd">        Returns</span>
<span class="sd">        -------</span>
<span class="sd">        List[Thumbnail]</span>
<span class="sd">            The list of engine like thumbnail objects</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">engines_raw</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">string</span><span class="o">=</span><span class="s2">&quot;Engines&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="n">class_</span><span class="o">=</span><span class="s2">&quot;row rowcontent clear&quot;</span><span class="p">)</span>
        <span class="n">engines</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">engines_raw</span><span class="p">:</span>
            <span class="n">link</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;content&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">h4</span><span class="o">.</span><span class="n">a</span>
            <span class="n">image_url</span> <span class="o">=</span> <span class="n">link</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;img&quot;</span><span class="p">)[</span><span class="s2">&quot;src&quot;</span><span class="p">]</span>
            <span class="n">engine</span> <span class="o">=</span> <span class="n">Thumbnail</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">link</span><span class="o">.</span><span class="n">string</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="n">link</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">],</span> <span class="n">image</span><span class="o">=</span><span class="n">image_url</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">ThumbnailType</span><span class="o">.</span><span class="n">engine</span><span class="p">)</span>
            <span class="n">engines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">engines</span>

    <span class="k">def</span> <span class="nf">get_comments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span> <span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CommentList</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Used to get comments on the model regardless of what page they may be present in. The function</span>
<span class="sd">        itself simply relies on two other to make the request and parse the table.</span>

<span class="sd">        Parameters</span>
<span class="sd">        ----------</span>
<span class="sd">        index : int </span>
<span class="sd">            The page of the model to get the comments for.</span>

<span class="sd">        Returns</span>
<span class="sd">        --------</span>
<span class="sd">        CommentList</span>
<span class="sd">            A subclass of list with the method flatten to retrieve all the children.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_comments</span><span class="p">(</span><span class="n">soup</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;</span><span class="si">{self.url}</span><span class="s2">/page/</span><span class="si">{index}</span><span class="s2">&quot;</span><span class="p">))</span>

<span class="k">class</span> <span class="nc">GetGamesMetaClass</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Abstract class containing the get_games method&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">get_games</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span> <span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Thumbnail</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get a page of games for the model. Each page will yield up to 30 games.</span>

<span class="sd">        Parameters</span>
<span class="sd">        -----------</span>
<span class="sd">        index : int</span>
<span class="sd">            The page number to get the games for.</span>

<span class="sd">        Returns</span>
<span class="sd">        --------</span>
<span class="sd">        List[Thumbnail]</span>
<span class="sd">            List of game like thumbnails that can be parsed individually.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;</span><span class="si">{self.url}</span><span class="s2">/games/page/</span><span class="si">{index}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">ThumbnailType</span><span class="o">.</span><span class="n">game</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">GetModsMetaClass</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Abstract class containing the get_mod method&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">get_mods</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span> <span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Thumbnail</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get a page of mods for the game. Each page will yield up to 30 mods. </span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        -----------</span>
<span class="sd">        index : int</span>
<span class="sd">            The page number to get the mods from.</span>

<span class="sd">        Returns</span>
<span class="sd">        --------</span>
<span class="sd">        List[Thumbnail]</span>
<span class="sd">            The list of mods type thumbnails parsed from the game</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;</span><span class="si">{self.url}</span><span class="s2">/mods/page/</span><span class="si">{index}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">ThumbnailType</span><span class="o">.</span><span class="n">mod</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">GetEnginesMetaClass</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Abstract class containing the get_engines method&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">get_engines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span> <span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Thumbnail</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get a page of engines for the game. Each page will yield up to 30 engines. </span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        -----------</span>
<span class="sd">        index : int</span>
<span class="sd">            The page number to get the engines from.</span>

<span class="sd">        Returns</span>
<span class="sd">        --------</span>
<span class="sd">        List[Thumbnail]</span>
<span class="sd">            The list of engine type thumbnails parsed from the game</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;</span><span class="si">{self.url}</span><span class="s2">/engines/page/</span><span class="si">{index}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">ThumbnailType</span><span class="o">.</span><span class="n">engine</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">SharedMethodsMetaClass</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Abstract class that implements a certain amount of top level methods shared between Pages</span>
<span class="sd">    and Hardware&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">get_reviews</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span> <span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">query</span> <span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">rating</span> <span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> 
                    <span class="n">sort</span> <span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="s1">&#39;Review&#39;</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get a page of reviews for the page. Each page will yield up to 10 reviews. </span>

<span class="sd">        Parameters</span>
<span class="sd">        -----------</span>
<span class="sd">        index : int</span>
<span class="sd">            The page number to get the reviews from.</span>
<span class="sd">        query : str</span>
<span class="sd">            The string to look for in the review, optional.</span>
<span class="sd">        rating : int</span>
<span class="sd">            A number between 1 and 10 to get the ratings</span>
<span class="sd">        sort : Tuple[str, str]</span>
<span class="sd">            The sorting tuple to sort by</span>

<span class="sd">        Returns</span>
<span class="sd">        --------</span>
<span class="sd">        List[Review]</span>
<span class="sd">            The list of article type thumbnails parsed from the page</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;filter&#39;</span><span class="p">:</span> <span class="s2">&quot;t&quot;</span><span class="p">,</span> <span class="s1">&#39;kw&#39;</span><span class="p">:</span> <span class="n">query</span><span class="p">,</span> <span class="s1">&#39;rating&#39;</span><span class="p">:</span> <span class="n">rating</span><span class="p">,</span> <span class="s2">&quot;sort&quot;</span><span class="p">:</span> <span class="n">sort</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="p">(</span><span class="n">sort</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="k">if</span> <span class="n">sort</span> <span class="k">else</span> <span class="kc">None</span><span class="p">}</span>

        <span class="n">html</span> <span class="o">=</span> <span class="n">soup</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;</span><span class="si">{self.url}</span><span class="s2">/reviews/page/</span><span class="si">{index}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
        <span class="n">table</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;form&quot;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s2">&quot;filterform&quot;</span><span class="p">})</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;table&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">table</span><span class="p">[</span><span class="s2">&quot;class&quot;</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[]</span>

        <span class="n">raw_reviews</span> <span class="o">=</span> <span class="n">table</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">)[</span><span class="mi">2</span><span class="p">:]</span>
        <span class="n">reviews</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">e</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1">#This is very hacky because a page of reviews is actually a list of review titles and review contents</span>
        <span class="c1">#I&#39;m not fucking with you, its a list of divs which go [Div[Title of review one], Div[content of review one],</span>
        <span class="c1">#Div[Title of review two], Div[content of review two]] It&#39;s dumb as fuck and I hate it.</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">raw_reviews</span><span class="p">)):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">review</span> <span class="o">=</span> <span class="n">raw_reviews</span><span class="p">[</span><span class="n">e</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                <span class="k">break</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">text</span> <span class="o">=</span> <span class="n">raw_reviews</span><span class="p">[</span><span class="n">e</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                <span class="c1">#some reviews don&#39;t have text, as long as you don&#39;t give lower than a three</span>
                <span class="n">text</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;class&quot;</span><span class="p">:</span> <span class="s2">&quot;None&quot;</span><span class="p">}</span>

            <span class="k">if</span> <span class="s2">&quot;rowcontentnext&quot;</span> <span class="ow">in</span> <span class="n">text</span><span class="p">[</span><span class="s2">&quot;class&quot;</span><span class="p">]:</span>
                <span class="n">e</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="n">review_obj</span> <span class="o">=</span> <span class="n">Review</span><span class="p">(</span><span class="n">review</span><span class="o">=</span><span class="n">review</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">review_obj</span> <span class="o">=</span> <span class="n">Review</span><span class="p">(</span><span class="n">review</span><span class="o">=</span><span class="n">review</span><span class="p">)</span>

            <span class="n">reviews</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">review_obj</span><span class="p">)</span>
            <span class="n">e</span> <span class="o">+=</span> <span class="mi">1</span>

        <span class="k">return</span> <span class="n">reviews</span>

    <span class="k">def</span> <span class="nf">get_articles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span> <span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">query</span> <span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">category</span> <span class="p">:</span> <span class="n">ArticleType</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> 
                     <span class="n">timeframe</span> <span class="p">:</span> <span class="n">TimeFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Thumbnail</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get a page of articles for the page. Each page will yield up to 30 articles. </span>

<span class="sd">        Parameters</span>
<span class="sd">        -----------</span>
<span class="sd">        index : int</span>
<span class="sd">            The page number to get the articles from.</span>
<span class="sd">        query : str</span>
<span class="sd">            The string query to search for in the article name, optional.</span>
<span class="sd">        category : ArticleType</span>
<span class="sd">            Type enum defining what the article is, optional</span>
<span class="sd">        timeframe : TimeFrame</span>
<span class="sd">            Time frame of when the article was added, optional</span>

<span class="sd">        Returns</span>
<span class="sd">        --------</span>
<span class="sd">        List[Thumbnail]</span>
<span class="sd">            The list of article type thumbnails parsed from the page</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;filter&quot;</span><span class="p">:</span> <span class="s2">&quot;t&quot;</span><span class="p">,</span> 
            <span class="s2">&quot;kw&quot;</span><span class="p">:</span> <span class="n">query</span><span class="p">,</span> 
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="n">category</span><span class="o">.</span><span class="n">value</span> <span class="k">if</span> <span class="n">category</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span> 
            <span class="s2">&quot;timeframe&quot;</span><span class="p">:</span> <span class="n">timeframe</span><span class="o">.</span><span class="n">value</span> <span class="k">if</span> <span class="n">timeframe</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;</span><span class="si">{self.url}</span><span class="s2">/articles/page/</span><span class="si">{index}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">ThumbnailType</span><span class="o">.</span><span class="n">article</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>
        
    <span class="k">def</span> <span class="nf">get_files</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span> <span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">query</span> <span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">category</span> <span class="p">:</span> <span class="n">FileCategory</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> 
                  <span class="n">addon_type</span> <span class="p">:</span> <span class="n">AddonCategory</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">timeframe</span> <span class="p">:</span> <span class="n">TimeFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Thumbnail</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get a page of files for the page. Each page will yield up to 30 files. </span>

<span class="sd">        Parameters</span>
<span class="sd">        -----------</span>
<span class="sd">        index : int</span>
<span class="sd">            The page number to get the files from.</span>
<span class="sd">        query : str</span>
<span class="sd">            The string query to search for in the file name, optional.</span>
<span class="sd">        category : FileCategory</span>
<span class="sd">            Type enum defining what the file is, optional</span>
<span class="sd">        addon_type : AddonCategory</span>
<span class="sd">            Type enum defining what category the file is.</span>
<span class="sd">        timeframe : TimeFrame</span>
<span class="sd">            Time frame of when the file was added, optional</span>

<span class="sd">        Returns</span>
<span class="sd">        --------</span>
<span class="sd">        List[Thumbnail]</span>
<span class="sd">            The list of file type thumbnails parsed from the page</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;filter&quot;</span><span class="p">:</span> <span class="s2">&quot;t&quot;</span><span class="p">,</span> 
            <span class="s2">&quot;kw&quot;</span><span class="p">:</span> <span class="n">query</span><span class="p">,</span> 
            <span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="n">category</span><span class="o">.</span><span class="n">value</span> <span class="k">if</span> <span class="n">category</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;categoryaddon&quot;</span><span class="p">:</span> <span class="n">addon_type</span><span class="o">.</span><span class="n">value</span> <span class="k">if</span> <span class="n">addon_type</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;timeframe&quot;</span><span class="p">:</span> <span class="n">timeframe</span><span class="o">.</span><span class="n">value</span> <span class="k">if</span> <span class="n">timeframe</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;</span><span class="si">{self.url}</span><span class="s2">/downloads/page/</span><span class="si">{index}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">ThumbnailType</span><span class="o">.</span><span class="n">file</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_images</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Thumbnail</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get all the images a page has uploaded. Literally all of them. As thumbnails. ModDB&#39;s imagebox</span>
<span class="sd">        caches all the urls for images on the page so this grabs them all. Lists might be long, but this </span>
<span class="sd">        is all the images. They can be invidually parsed to get full fledged media objects from them.</span>

<span class="sd">        Returns</span>
<span class="sd">        --------</span>
<span class="sd">        List[Thumbnail]</span>
<span class="sd">            The list of image type thumbnails parsed from the page</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">html</span> <span class="o">=</span> <span class="n">soup</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;</span><span class="si">{self.url}</span><span class="s2">/images&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_media</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">html</span><span class="o">=</span><span class="n">html</span><span class="p">)</span>
        

    <span class="k">def</span> <span class="nf">get_videos</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Thumbnail</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get all the videos a page has uploaded. Literally all of them. As thumbnails. ModDB&#39;s imagebox</span>
<span class="sd">        caches all the urls for videos on the page so this grabs them all. Lists might be long, but this </span>
<span class="sd">        is all the videos. They can be invidually parsed to get full fledged media objects from them.</span>

<span class="sd">        Returns</span>
<span class="sd">        --------</span>
<span class="sd">        List[Thumbnail]</span>
<span class="sd">            The list of video type thumbnails parsed from the page</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">html</span> <span class="o">=</span> <span class="n">soup</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;</span><span class="si">{self.url}</span><span class="s2">/videos&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_media</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">html</span><span class="o">=</span><span class="n">html</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_tutorials</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span> <span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">query</span> <span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">difficulty</span> <span class="p">:</span> <span class="n">Difficulty</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> 
                      <span class="n">tutorial_type</span> <span class="p">:</span> <span class="n">TutorialType</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Thumbnail</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get a page of tutorial for the page. Each page will yield up to 30 tutorials. </span>

<span class="sd">        Parameters</span>
<span class="sd">        -----------</span>
<span class="sd">        index : int</span>
<span class="sd">            The page number to get the tutorials from.</span>
<span class="sd">        query : str</span>
<span class="sd">            The string query to look for in the tutorial title, optional.</span>
<span class="sd">        difficulty : Difficulty</span>
<span class="sd">            Enum type representing the difficulty of the tutorial, optional.</span>
<span class="sd">        tutorial_type : TutorialType</span>
<span class="sd">            Enum type representing the theme/type/category of the tutorial, optional.</span>

<span class="sd">        Returns</span>
<span class="sd">        --------</span>
<span class="sd">        List[Thumbnail]</span>
<span class="sd">            The list of tutorial type thumbnails parsed from the page</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;filter&quot;</span><span class="p">:</span> <span class="s2">&quot;t&quot;</span><span class="p">,</span> 
            <span class="s2">&quot;kw&quot;</span><span class="p">:</span> <span class="n">query</span><span class="p">,</span> 
            <span class="s2">&quot;subtype&quot;</span><span class="p">:</span> <span class="n">tutorial_type</span><span class="o">.</span><span class="n">value</span> <span class="k">if</span> <span class="n">tutorial_type</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span> 
            <span class="s2">&quot;meta&quot;</span><span class="p">:</span> <span class="n">difficulty</span><span class="o">.</span><span class="n">value</span> <span class="k">if</span> <span class="n">difficulty</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;</span><span class="si">{self.url}</span><span class="s2">/tutorials/page/</span><span class="si">{index}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">ThumbnailType</span><span class="o">.</span><span class="n">article</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">GetSoftwareHardwareMetaClass</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Abstrac class implementing get_software and get_hardware&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">get_hardware</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span> <span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Thumbnail</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get a page of hardware for the platform. Each page will yield up to 30 hardware.</span>

<span class="sd">        Parameters</span>
<span class="sd">        -----------</span>
<span class="sd">        index : int</span>
<span class="sd">            The page number to get the hardware for.</span>

<span class="sd">        Returns</span>
<span class="sd">        --------</span>
<span class="sd">        List[Thumbnail]</span>
<span class="sd">            List of hardware like thumbnails that can be parsed individually.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;</span><span class="si">{self.url}</span><span class="s2">/games/page/</span><span class="si">{index}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">ThumbnailType</span><span class="o">.</span><span class="n">hardware</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_software</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span> <span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Thumbnail</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get a page of software for the platform. Each page will yield up to 30 software.</span>

<span class="sd">        Parameters</span>
<span class="sd">        -----------</span>
<span class="sd">        index : int</span>
<span class="sd">            The page number to get the software for.</span>

<span class="sd">        Returns</span>
<span class="sd">        --------</span>
<span class="sd">        List[Thumbnail]</span>
<span class="sd">            List of software like thumbnails that can be parsed individually.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;</span><span class="si">{self.url}</span><span class="s2">/games/page/</span><span class="si">{index}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">ThumbnailType</span><span class="o">.</span><span class="n">software</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Page</span><span class="p">(</span><span class="n">Base</span><span class="p">,</span> <span class="n">SharedMethodsMetaClass</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The common class representing the page for either a Mod, Game, Engine or a User. Mostly used to be inherited by</span>
<span class="sd">    those classes.</span>

<span class="sd">    Parameters</span>
<span class="sd">    -----------</span>
<span class="sd">    html : bs4.BeautifulSoup</span>
<span class="sd">        The page to be parsed.</span>

<span class="sd">    page_type : ThumbnailType</span>
<span class="sd">        The type of pages, this is passed down be the base class to help with the parsing of pages.</span>

<span class="sd">    Attributes</span>
<span class="sd">    -----------</span>
<span class="sd">    name : str</span>
<span class="sd">        The name of the page</span>
<span class="sd">    profile : Profile</span>
<span class="sd">        The object with the content of the page&#39;s profile box.</span>
<span class="sd">    statistics : Statistics</span>
<span class="sd">        The object containg stat data on the page such as views, followers, ect...</span>
<span class="sd">    style : Style</span>
<span class="sd">        The object containing data relevant to the type of the game. Multiplayer, singleplayer, ect...</span>
<span class="sd">    suggestions : List[Thumbnail]</span>
<span class="sd">        A list of thumbnail object representing moddb&#39;s suggestion of similar pages for the visiting user.</span>
<span class="sd">    files : List[Thumbnail]</span>
<span class="sd">        A list of thumbnails representing a possible partial list of all the files. To get a guaranteed full</span>
<span class="sd">        list either compare with statistics.files to see if the length of the list matches the number of files in the</span>
<span class="sd">        stats or use get_files, although that will still not return the whole list if there are multiple pages of</span>
<span class="sd">        files.</span>
<span class="sd">    articles : List[Thumbnail]</span>
<span class="sd">        A list of thumbnail objects representing articles present on the page. Usually 3 or 4 articles long. </span>
<span class="sd">    article :  PartialArticle</span>
<span class="sd">        A partial representation of the frong page article. This does not include things like comments or any</span>
<span class="sd">        of the sideba elements found in a full article. Can be parsed to return the complete Article object.</span>
<span class="sd">    tags : dict{str : str}</span>
<span class="sd">        A dict of key-values pair where the key is the name of the tag and the value is the url.</span>
<span class="sd">    imagebox : List[Thumbnail]</span>
<span class="sd">        A list of Thumbnail objects representing the image, videos and audio clips that are presented in the</span>
<span class="sd">        image box on the front page.</span>
<span class="sd">    embed : str</span>
<span class="sd">        The html necessary to embed the a widget of the page.</span>
<span class="sd">    rating : float</span>
<span class="sd">        A float out of ten representing the average rating for the page</span>
<span class="sd">    medias : List[Thumbnail]</span>
<span class="sd">        list of thumbnails representing all the combined media objects of a page (videos and images)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html</span> <span class="p">:</span> <span class="n">bs4</span><span class="o">.</span><span class="n">BeautifulSoup</span><span class="p">,</span> <span class="n">page_type</span> <span class="p">:</span> <span class="n">ThumbnailType</span><span class="p">):</span>
        <span class="c1">#ToDo: add status</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>

        <span class="c1">#boxes</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">profile</span> <span class="o">=</span> <span class="n">Profile</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">statistics</span> <span class="o">=</span> <span class="n">Statistics</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">page_type</span> <span class="o">!=</span> <span class="n">SearchCategory</span><span class="o">.</span><span class="n">engines</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">style</span> <span class="o">=</span> <span class="n">Style</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>

        <span class="c1">#thumbnails</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">suggestions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_suggestions</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">files</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_files</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> has no files&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">files</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">articles_raw</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;Articles&quot;</span> <span class="k">if</span> <span class="n">page_type</span> <span class="o">==</span> <span class="n">SearchCategory</span><span class="o">.</span><span class="n">mods</span> <span class="k">else</span> <span class="s2">&quot;Related Articles&quot;</span>
            <span class="n">articles_raw</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="n">string</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;table&quot;</span><span class="p">)</span>
            <span class="n">thumbnails</span> <span class="o">=</span> <span class="n">articles_raw</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;row rowcontent clear&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">articles</span> <span class="o">=</span> <span class="p">[</span><span class="n">Thumbnail</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span> <span class="n">url</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">],</span> <span class="n">image</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">img</span><span class="p">[</span><span class="s2">&quot;src&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">img</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">ThumbnailType</span><span class="o">.</span><span class="n">article</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">thumbnails</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> has no article suggestions&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">profile</span><span class="o">.</span><span class="n">category</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">articles</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1">#main page article</span>
        <span class="k">if</span> <span class="n">articles_raw</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">article</span> <span class="o">=</span> <span class="n">PartialArticle</span><span class="p">(</span><span class="n">articles_raw</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">article</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> has no front page article&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">profile</span><span class="o">.</span><span class="n">category</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">raw_tags</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;form&quot;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;tagsform&quot;</span><span class="p">})</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tags</span> <span class="o">=</span> <span class="p">{</span><span class="n">x</span><span class="o">.</span><span class="n">string</span> <span class="p">:</span> <span class="n">join</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">])</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">raw_tags</span> <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">string</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">}</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tags</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> has no tags&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="c1">#imagebox</span>
        <span class="n">imagebox</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;ul&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;imagebox&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;li&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">imagebox</span> <span class="o">=</span> <span class="p">[</span><span class="n">Thumbnail</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span> <span class="n">url</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">],</span> <span class="n">image</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">img</span><span class="p">[</span><span class="s2">&quot;src&quot;</span><span class="p">],</span> <span class="nb">type</span><span class="o">=</span><span class="n">ThumbnailType</span><span class="p">(</span><span class="n">get_type</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">img</span><span class="p">)))</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">imagebox</span><span class="p">]</span>
        
        <span class="c1">#misc</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">embed</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;input&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;text textembed&quot;</span><span class="p">)[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">embed</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">html</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;textarea&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">a</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rating</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;score&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;meta&quot;</span><span class="p">,</span> <span class="n">itemprop</span><span class="o">=</span><span class="s2">&quot;ratingValue&quot;</span><span class="p">)[</span><span class="s2">&quot;content&quot;</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rating</span> <span class="o">=</span> <span class="mf">0.0</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> is not rated&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">profile</span><span class="o">.</span><span class="n">category</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">medias</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_media</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">html</span><span class="o">=</span><span class="n">html</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_addons</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span> <span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">query</span> <span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">addon_type</span> <span class="p">:</span> <span class="n">AddonCategory</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                   <span class="n">timeframe</span> <span class="p">:</span> <span class="n">TimeFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">licence</span> <span class="p">:</span> <span class="n">Licence</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Thumbnail</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get a page of addons for the page. Each page will yield up to 30 addons. </span>

<span class="sd">        Parameters</span>
<span class="sd">        -----------</span>
<span class="sd">        index : int</span>
<span class="sd">            The page number to get the addons from.</span>
<span class="sd">        query : str</span>
<span class="sd">            The string query to search for in the addon name, optional.</span>
<span class="sd">        addon_type : AddonCategory</span>
<span class="sd">            Type enum defining what category the file is.</span>
<span class="sd">        timeframe : TimeFrame</span>
<span class="sd">            Time frame of when the file was added, optional</span>
<span class="sd">        licence : Licence</span>
<span class="sd">            The licence for the addon, optional</span>

<span class="sd">        Returns</span>
<span class="sd">        --------</span>
<span class="sd">        List[Thumbnail]</span>
<span class="sd">            The list of addon type thumbnails parsed from the page</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;filter&quot;</span><span class="p">:</span> <span class="s2">&quot;t&quot;</span><span class="p">,</span>
            <span class="s2">&quot;kw&quot;</span><span class="p">:</span> <span class="n">query</span><span class="p">,</span>
            <span class="s2">&quot;category&quot;</span><span class="p">:</span> <span class="n">addon_type</span><span class="o">.</span><span class="n">value</span> <span class="k">if</span> <span class="n">addon_type</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;timeframe&quot;</span><span class="p">:</span> <span class="n">timeframe</span><span class="o">.</span><span class="n">value</span> <span class="k">if</span> <span class="n">timeframe</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;licence&quot;</span><span class="p">:</span> <span class="n">licence</span><span class="o">.</span><span class="n">value</span> <span class="k">if</span> <span class="n">licence</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;</span><span class="si">{self.url}</span><span class="s2">/addons/page/</span><span class="si">{index}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">ThumbnailType</span><span class="o">.</span><span class="n">addon</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">f</span><span class="s2">&quot;&lt;</span><span class="si">{self.__class__.__name__}</span><span class="s2"> name=</span><span class="si">{self.name}</span><span class="s2">&gt;&quot;</span>

<div class="viewcode-block" id="Mod"><a class="viewcode-back" href="../../pages.html#moddb.pages.Mod">[docs]</a><span class="nd">@concat_docs</span>
<span class="k">class</span> <span class="nc">Mod</span><span class="p">(</span><span class="n">Page</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Basically just a subclass of Page</span>

<span class="sd">    Parameters</span>
<span class="sd">    -----------</span>
<span class="sd">    html : bs4.BeautifulSoup</span>
<span class="sd">        The html to parse. Allows for finer control.</span>

<span class="sd">    Filtering</span>
<span class="sd">    ----------</span>
<span class="sd">    released : enums.Status</span>
<span class="sd">        The status of the mod (released, unreleased)</span>
<span class="sd">    genre : enums.Genre</span>
<span class="sd">        The genre of the mod (fps, tower defense)</span>
<span class="sd">    theme : enums.Theme</span>
<span class="sd">        The theme of the mod (fantasy, action)</span>
<span class="sd">    players : enums.PlayerStyle</span>
<span class="sd">        Player styles of the mod (co-op, singleplayer)</span>
<span class="sd">    timeframe : enums.TimeFrame</span>
<span class="sd">        The time period this was released in (last 24hr, last week, last month)</span>
<span class="sd">    game : Union[pages.Game, utils.Object]</span>
<span class="sd">        An game object or an object with an id attribute which represents the</span>
<span class="sd">        game the mod belongs to.</span>

<span class="sd">    Sorting</span>
<span class="sd">    --------</span>
<span class="sd">        * **released** - when the object was released, asc is oldest, desc is most recent</span>
<span class="sd">        * **id** - when it was added to moddb, asc is oldest, desc is most recent</span>
<span class="sd">        * **ranktoday** - order by daily ranking, asc is highest ranked, desc is lowest rank</span>
<span class="sd">        * **visitstotal** - order by most views, asc is highest views, desc is lowest views</span>
<span class="sd">        * **rating** - order by rating, asc is highest rating, desc is lowest rating</span>
<span class="sd">        * **name** - order alphabetically, asc is a-z, desc is z-a</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html</span> <span class="p">:</span> <span class="n">bs4</span><span class="o">.</span><span class="n">BeautifulSoup</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="n">SearchCategory</span><span class="o">.</span><span class="n">mods</span><span class="p">)</span></div>

<div class="viewcode-block" id="Game"><a class="viewcode-back" href="../../pages.html#moddb.pages.Game">[docs]</a><span class="nd">@concat_docs</span>
<span class="k">class</span> <span class="nc">Game</span><span class="p">(</span><span class="n">Page</span><span class="p">,</span> <span class="n">GetModsMetaClass</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A subclass of Page plus a method to get all the mods.</span>

<span class="sd">    Parameters</span>
<span class="sd">    -----------</span>
<span class="sd">    html : bs4.BeautifulSoup</span>
<span class="sd">        The html to parse. Allows for finer control.</span>

<span class="sd">    Filtering</span>
<span class="sd">    ----------</span>
<span class="sd">    released : enums.Status</span>
<span class="sd">        The status of the game (released, unreleased)</span>
<span class="sd">    genre : enums.Genre</span>
<span class="sd">        The genre of the game (fps, tower defense)</span>
<span class="sd">    theme : enums.Theme</span>
<span class="sd">        The theme of the game (fantasy, action)</span>
<span class="sd">    indie : enums.Scope</span>
<span class="sd">        Whether the game is triple AAA or indie</span>
<span class="sd">    players : enums.PlayerStyle</span>
<span class="sd">        Player styles of the game (co-op, singleplayer)</span>
<span class="sd">    timeframe : enums.TimeFrame</span>
<span class="sd">        The time period this was released in (last 24hr, last week, last month)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html</span> <span class="p">:</span> <span class="n">bs4</span><span class="o">.</span><span class="n">BeautifulSoup</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="n">SearchCategory</span><span class="o">.</span><span class="n">games</span><span class="p">)</span></div>

<div class="viewcode-block" id="Engine"><a class="viewcode-back" href="../../pages.html#moddb.pages.Engine">[docs]</a><span class="nd">@concat_docs</span>
<span class="k">class</span> <span class="nc">Engine</span><span class="p">(</span><span class="n">Page</span><span class="p">,</span> <span class="n">GetGamesMetaClass</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A subclass of Page, however, it does not have the files attribute or the get_files method</span>
<span class="sd">    since engines can&#39;t have files.</span>

<span class="sd">    Parameters</span>
<span class="sd">    -----------</span>
<span class="sd">    html : bs4.BeautifulSoup</span>
<span class="sd">        The html to parse. Allows for finer control.</span>

<span class="sd">    Filtering</span>
<span class="sd">    -----------</span>
<span class="sd">    released : enums.Status</span>
<span class="sd">        The status of the engine (released, unreleased)</span>
<span class="sd">    licence : enums.Licence</span>
<span class="sd">        The license of the engine</span>
<span class="sd">    timeframe : enums.TimeFrame</span>
<span class="sd">        The time period this was released in (last 24hr, last week, last month)</span>

<span class="sd">    Attributes</span>
<span class="sd">    -----------</span>
<span class="sd">    games : List[Thumbnail]</span>
<span class="sd">        A list of games suggested on the engine main page.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1">#ToDo: can engines have files?</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html</span> <span class="p">:</span> <span class="n">bs4</span><span class="o">.</span><span class="n">BeautifulSoup</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="n">SearchCategory</span><span class="o">.</span><span class="n">engines</span><span class="p">)</span>
        <span class="nb">delattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;files&quot;</span><span class="p">)</span>
        <span class="nb">delattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;get_files&quot;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">games</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_games</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Engine </span><span class="si">%s</span><span class="s2"> has no games&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">games</span> <span class="o">=</span> <span class="p">[]</span></div>

<div class="viewcode-block" id="File"><a class="viewcode-back" href="../../pages.html#moddb.pages.File">[docs]</a><span class="nd">@concat_docs</span>
<span class="k">class</span> <span class="nc">File</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;An oject representing a file on ModDB, a file is something posted by the page owner which is directly linked </span>
<span class="sd">    to the page. It is endorsed by the page owner and they should do everythign they can to make sure that it is safe.</span>
<span class="sd">    As compared to an addon that may be added by fans to the page and that are files meant to work with the page but</span>
<span class="sd">    that are not directly related to the page. E.x the file of a mod page would be the mod files used to install the</span>
<span class="sd">    mod whereas an addon could be something like a fan-made texture pack for the mod or a map.</span>

<span class="sd">    Parameters</span>
<span class="sd">    -----------</span>
<span class="sd">    html : bs4.BeautifulSoup</span>
<span class="sd">        The html to parse. Allows for finer control.</span>

<span class="sd">    Filtering</span>
<span class="sd">    ----------</span>
<span class="sd">    category  : enums.FileCategory</span>
<span class="sd">        The type of file (audio, video, demo, full version....)</span>
<span class="sd">    categoryaddon : enums.AddonCategory</span>
<span class="sd">        The type of addon (map, textures, ect...)</span>
<span class="sd">    game : Union[pages.Game, utils.Object]</span>
<span class="sd">        An game object or an object with an id attribute which represents the</span>
<span class="sd">        game the addon belongs to.</span>
<span class="sd">    timeframe : enums.TimeFrame</span>
<span class="sd">        The time period this was released in (last 24hr, last week, last month)</span>

<span class="sd">    Attributes</span>
<span class="sd">    -----------</span>
<span class="sd">    hash : str</span>
<span class="sd">        The MD5 hash of the file</span>
<span class="sd">    name : str</span>
<span class="sd">        The name of the file</span>
<span class="sd">    size : int</span>
<span class="sd">        the file size in bytes</span>
<span class="sd">    today : int</span>
<span class="sd">        The number of downloads today</span>
<span class="sd">    downloads : int</span>
<span class="sd">        The total number of times this file has been downloaded</span>
<span class="sd">    category : FileCategory</span>
<span class="sd">        The category of the file</span>
<span class="sd">    author : Thumbnail</span>
<span class="sd">        A user type thumbnail of the user who uploaded the file</span>
<span class="sd">    date : datetime.datetime</span>
<span class="sd">        The date the file was uploaded</span>
<span class="sd">    button : str</span>
<span class="sd">        html code for the embed button</span>
<span class="sd">    widget : str</span>
<span class="sd">        html code for the embed widget</span>
<span class="sd">    description : str</span>
<span class="sd">        Description of the file, as written by the author</span>
<span class="sd">    preview : str</span>
<span class="sd">        URL of the preview image for the file</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html</span> <span class="p">:</span> <span class="n">bs4</span><span class="o">.</span><span class="n">BeautifulSoup</span><span class="p">):</span>
        <span class="n">info</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;table tablemenu&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;h5&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Filename&quot;</span><span class="p">,</span> <span class="s2">&quot;Size&quot;</span><span class="p">,</span> <span class="s2">&quot;MD5 Hash&quot;</span><span class="p">))</span>
        <span class="n">file</span> <span class="o">=</span> <span class="p">{</span><span class="n">x</span><span class="o">.</span><span class="n">string</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">span</span><span class="o">.</span><span class="n">string</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">info</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">file</span><span class="p">[</span><span class="s2">&quot;filename&quot;</span><span class="p">]</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">hash</span> <span class="o">=</span> <span class="n">file</span><span class="p">[</span><span class="s2">&quot;md5 hash&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;[(),bytes]&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">file</span><span class="p">[</span><span class="s2">&quot;size&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]))</span>

        <span class="n">downloads</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;h5&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="s2">&quot;Downloads&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">string</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">today</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;[(),today]&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">downloads</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">downloads</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">downloads</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">category</span> <span class="o">=</span> <span class="n">FileCategory</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;h5&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="s2">&quot;Category&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>
        
        <span class="n">uploader</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;h5&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="s2">&quot;Uploader&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">a</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">author</span> <span class="o">=</span> <span class="n">Thumbnail</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">uploader</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="n">uploader</span><span class="o">.</span><span class="n">string</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">ThumbnailType</span><span class="o">.</span><span class="n">user</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="n">get_date</span><span class="p">(</span><span class="n">info</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;h5&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="s2">&quot;Added&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">span</span><span class="o">.</span><span class="n">time</span><span class="p">[</span><span class="s2">&quot;datetime&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">button</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;h5&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="s2">&quot;Embed Button&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">span</span><span class="o">.</span><span class="n">input</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">widget</span> <span class="o">=</span> <span class="n">info</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;h5&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="s2">&quot;Embed Widget&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">span</span><span class="o">.</span><span class="n">input</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;downloadsummary&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">string</span>

        <span class="c1">#Todo: can this be a media object?</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preview</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;img&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;src&quot;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">f</span><span class="s2">&quot;&lt;</span><span class="si">{self.__class__.__name__}</span><span class="s2"> name=</span><span class="si">{self.name}</span><span class="s2"> type=</span><span class="si">{self.type.name}</span><span class="s2">&gt;&quot;</span></div>

<div class="viewcode-block" id="Addon"><a class="viewcode-back" href="../../pages.html#moddb.pages.Addon">[docs]</a><span class="nd">@concat_docs</span>
<span class="k">class</span> <span class="nc">Addon</span><span class="p">(</span><span class="n">File</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Object representing an addon</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1">#ToDo: find difference between addon and file?</span>
    <span class="c1">#ToDo: make use of AddonCategory</span>
    <span class="c1">#ToDo: make use of Licence</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html</span> <span class="p">:</span> <span class="n">bs4</span><span class="o">.</span><span class="n">BeautifulSoup</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">html</span><span class="p">)</span></div>

<div class="viewcode-block" id="Media"><a class="viewcode-back" href="../../pages.html#moddb.pages.Media">[docs]</a><span class="nd">@concat_docs</span>
<span class="k">class</span> <span class="nc">Media</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Represents an image, audio file or video file on </span>

<span class="sd">    Parameters</span>
<span class="sd">    -----------</span>
<span class="sd">    html : bs4.BeautifulSoup</span>
<span class="sd">        The html to parse. Allows for finer control.</span>

<span class="sd">    Filtering</span>
<span class="sd">    -----------</span>
<span class="sd">    sitearea : enums.Category</span>
<span class="sd">        The type of model the media belongs to. Category.downloads is not valid for this.</span>

<span class="sd">    Attributes</span>
<span class="sd">    -----------</span>
<span class="sd">    date : datetime.datetime</span>
<span class="sd">        The date the media was uploaded</span>
<span class="sd">    name : str</span>
<span class="sd">        The name of the media</span>
<span class="sd">    author : Thumbnail</span>
<span class="sd">        User type thumbnail of the media uploader</span>
<span class="sd">    duration : int</span>
<span class="sd">        Duration of the media in seconds, 0 if it&#39;s an image</span>
<span class="sd">    size : int</span>
<span class="sd">        Size of the files in bytes</span>
<span class="sd">    views : int</span>
<span class="sd">        Total amount of views</span>
<span class="sd">    today : int</span>
<span class="sd">        Amount of views today</span>
<span class="sd">    filename : str</span>
<span class="sd">        The name of the file for the media</span>
<span class="sd">    fileurl : str</span>
<span class="sd">        The url of the file for the media</span>
<span class="sd">    category : MediaCategory</span>
<span class="sd">        Whether the media is an image, a video or an audio</span>
<span class="sd">    description : str</span>
<span class="sd">        The description of the file as given by the file uploader.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html</span> <span class="p">:</span> <span class="n">bs4</span><span class="o">.</span><span class="n">BeautifulSoup</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;meta&quot;</span><span class="p">,</span> <span class="n">itemprop</span><span class="o">=</span><span class="s2">&quot;name&quot;</span><span class="p">)[</span><span class="s2">&quot;content&quot;</span><span class="p">]</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="n">medias</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;h5&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Date&quot;</span><span class="p">,</span> <span class="s2">&quot;By&quot;</span><span class="p">,</span> <span class="s2">&quot;Duration&quot;</span><span class="p">,</span> <span class="s2">&quot;Size&quot;</span><span class="p">,</span> <span class="s2">&quot;Views&quot;</span><span class="p">,</span> <span class="s2">&quot;Filename&quot;</span><span class="p">))</span>
        <span class="n">raw_media</span> <span class="o">=</span> <span class="p">{</span><span class="n">media</span><span class="o">.</span><span class="n">string</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="p">:</span> <span class="n">media</span><span class="o">.</span><span class="n">parent</span> <span class="k">for</span> <span class="n">media</span> <span class="ow">in</span> <span class="n">medias</span><span class="p">}</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="n">get_date</span><span class="p">(</span><span class="n">raw_media</span><span class="p">[</span><span class="s2">&quot;date&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">span</span><span class="o">.</span><span class="n">time</span><span class="p">[</span><span class="s2">&quot;datetime&quot;</span><span class="p">])</span>

        <span class="n">author</span> <span class="o">=</span> <span class="n">raw_media</span><span class="p">[</span><span class="s2">&quot;by&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">span</span><span class="o">.</span><span class="n">a</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">author</span> <span class="o">=</span> <span class="n">Thumbnail</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">author</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="n">author</span><span class="o">.</span><span class="n">string</span><span class="o">.</span><span class="n">strip</span><span class="p">(),</span> <span class="nb">type</span><span class="o">=</span><span class="n">ThumbnailType</span><span class="o">.</span><span class="n">user</span><span class="p">)</span>

        <span class="c1">#ToDo: consider possibility of hour long videos, maybe longer</span>
        <span class="k">if</span> <span class="s2">&quot;duration&quot;</span> <span class="ow">in</span> <span class="n">raw_media</span><span class="p">:</span>
            <span class="n">duration</span> <span class="o">=</span> <span class="n">raw_media</span><span class="p">[</span><span class="s2">&quot;duration&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">span</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">string</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">duration</span> <span class="o">=</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">duration</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">*</span> <span class="mi">60</span><span class="p">)</span> <span class="o">+</span> <span class="nb">int</span><span class="p">(</span><span class="n">duration</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">duration</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">if</span> <span class="s2">&quot;size&quot;</span> <span class="ow">in</span> <span class="n">raw_media</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">raw_media</span><span class="p">[</span><span class="s2">&quot;size&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">span</span><span class="o">.</span><span class="n">string</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;×&quot;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">views</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">today</span> <span class="o">=</span> <span class="n">get_views</span><span class="p">(</span><span class="n">raw_media</span><span class="p">[</span><span class="s2">&quot;views&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">string</span><span class="p">)</span>

        <span class="k">if</span> <span class="s2">&quot;filename&quot;</span> <span class="ow">in</span> <span class="n">raw_media</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">filename</span> <span class="o">=</span> <span class="n">raw_media</span><span class="p">[</span><span class="s2">&quot;filename&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">span</span><span class="o">.</span><span class="n">string</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="k">if</span> <span class="s2">&quot;size&quot;</span> <span class="ow">in</span> <span class="n">raw_media</span> <span class="ow">and</span> <span class="s2">&quot;duration&quot;</span> <span class="ow">in</span> <span class="n">raw_media</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">category</span> <span class="o">=</span> <span class="n">MediaCategory</span><span class="o">.</span><span class="n">video</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fileurl</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;meta&quot;</span><span class="p">,</span> <span class="nb">property</span><span class="o">=</span><span class="s2">&quot;og:image&quot;</span><span class="p">)[</span><span class="s2">&quot;content&quot;</span><span class="p">][:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>
        <span class="k">elif</span> <span class="s2">&quot;size&quot;</span> <span class="ow">in</span> <span class="n">raw_media</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">category</span> <span class="o">=</span> <span class="n">MediaCategory</span><span class="o">.</span><span class="n">image</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fileurl</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;meta&quot;</span><span class="p">,</span> <span class="nb">property</span><span class="o">=</span><span class="s2">&quot;og:image&quot;</span><span class="p">)[</span><span class="s2">&quot;content&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">category</span> <span class="o">=</span> <span class="n">MediaCategory</span><span class="o">.</span><span class="n">audio</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fileurl</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;video&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;mediaplayer&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;source&quot;</span><span class="p">)[</span><span class="s2">&quot;src&quot;</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;meta&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;description&quot;</span><span class="p">})[</span><span class="s2">&quot;content&quot;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">f</span><span class="s2">&quot;&lt;Media name=</span><span class="si">{self.name}</span><span class="s2"> type=</span><span class="si">{self.type.name}</span><span class="s2">&gt;&quot;</span></div>

<div class="viewcode-block" id="Article"><a class="viewcode-back" href="../../pages.html#moddb.pages.Article">[docs]</a><span class="nd">@concat_docs</span>
<span class="k">class</span> <span class="nc">Article</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This object represents an news article, a tutorial or a feature.</span>

<span class="sd">    Parameters</span>
<span class="sd">    -----------</span>
<span class="sd">    html : bs4.BeautifulSoup</span>
<span class="sd">        The html to parse. Allows for finer control.</span>

<span class="sd">    Filtering</span>
<span class="sd">    ----------</span>
<span class="sd">    type : enums.ArticleType</span>
<span class="sd">        Type of the article (news, feature)</span>
<span class="sd">    timeframe : enums.TimeFrame</span>
<span class="sd">        The time period this was released in (last 24hr, last week, last month)</span>
<span class="sd">    game : Union[pages.Game, utils.Object]</span>
<span class="sd">        An game object or an object with an id attribute which represents the</span>
<span class="sd">        game the addon belongs to.</span>

<span class="sd">    Attributes</span>
<span class="sd">    -----------</span>
<span class="sd">    type : ArticleType</span>
<span class="sd">        Whether this article is a news article, a tutorial or a feature</span>
<span class="sd">    name : str</span>
<span class="sd">        The name of the article</span>
<span class="sd">    profile : Profile</span>
<span class="sd">        The profile object of the moddb model the article is for (engine, game, mod...)</span>
<span class="sd">    tags : dict{str : str}</span>
<span class="sd">        A dictionary of tags with the tag names as the key and the url to the tag</span>
<span class="sd">        as the value.</span>
<span class="sd">    views : int</span>
<span class="sd">        Total amount of times this article was viewed</span>
<span class="sd">    today : int</span>
<span class="sd">        amount of time the article has been viewed today</span>
<span class="sd">    intro : int</span>
<span class="sd">        The intro/teaser paragraph of the article</span>
<span class="sd">    author : Thumbnail</span>
<span class="sd">        A user type thumbnail of the user who published the article</span>
<span class="sd">    date : datetime.datetime</span>
<span class="sd">        The date the article was published</span>
<span class="sd">    html : str</span>
<span class="sd">        The html of the article</span>
<span class="sd">    plaintext : str</span>
<span class="sd">        The article text without any html</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html</span> <span class="p">:</span> <span class="n">bs4</span><span class="o">.</span><span class="n">BeautifulSoup</span><span class="p">):</span>
        <span class="c1">#ToDo</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,</span> <span class="n">itemprop</span><span class="o">=</span><span class="s2">&quot;headline&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">string</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>

        <span class="n">raw_type</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;h5&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="s2">&quot;Browse&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">span</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">string</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">ArticleType</span><span class="p">[</span><span class="n">raw_type</span><span class="o">.</span><span class="n">lower</span><span class="p">()]</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">raw</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="n">raw_type</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;table tablemenu&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="n">raw</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="n">raw_type</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;table tablemenu&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">profile</span> <span class="o">=</span> <span class="n">Profile</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">raw_tags</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;form&quot;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;tagsform&quot;</span><span class="p">})</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tags</span> <span class="o">=</span> <span class="p">{</span><span class="n">x</span><span class="o">.</span><span class="n">string</span> <span class="p">:</span> <span class="n">join</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">])</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">raw_tags</span> <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">string</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">}</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tags</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> has no tags&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> 
        
        <span class="n">views_raw</span> <span class="o">=</span> <span class="n">raw</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;h5&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="s2">&quot;Views&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">span</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">string</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">views</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">today</span> <span class="o">=</span> <span class="n">get_views</span><span class="p">(</span><span class="n">views_raw</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">intro</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">,</span> <span class="n">itemprop</span><span class="o">=</span><span class="s2">&quot;description&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">string</span>
        <span class="n">author</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,</span> <span class="n">itemprop</span><span class="o">=</span><span class="s2">&quot;author&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">span</span><span class="o">.</span><span class="n">a</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">author</span> <span class="o">=</span> <span class="n">Thumbnail</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">author</span><span class="o">.</span><span class="n">string</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="n">author</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">],</span> <span class="nb">type</span><span class="o">=</span><span class="n">ThumbnailType</span><span class="o">.</span><span class="n">user</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="n">get_date</span><span class="p">(</span><span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;time&quot;</span><span class="p">,</span> <span class="n">itemprop</span><span class="o">=</span><span class="s2">&quot;datePublished&quot;</span><span class="p">)[</span><span class="s2">&quot;datetime&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">html</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">itemprop</span><span class="o">=</span><span class="s2">&quot;articleBody&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plaintext</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">itemprop</span><span class="o">=</span><span class="s2">&quot;articleBody&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">f</span><span class="s2">&quot;&lt;Article title=</span><span class="si">{self.name}</span><span class="s2"> type=</span><span class="si">{self.type.name}</span><span class="s2">&gt;&quot;</span></div>

<div class="viewcode-block" id="Group"><a class="viewcode-back" href="../../pages.html#moddb.pages.Group">[docs]</a><span class="nd">@concat_docs</span>
<span class="k">class</span> <span class="nc">Group</span><span class="p">(</span><span class="n">Page</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This object represents the group model of  Certain attributes can be None if the group</span>
<span class="sd">    has been set to private. If you wish to see a group you have access to then you can login with the</span>
<span class="sd">    login </span>

<span class="sd">    Parameters</span>
<span class="sd">    -----------</span>
<span class="sd">    html : bs4.BeautifulSoup</span>
<span class="sd">        The html to parse. Allows for finer control.</span>

<span class="sd">    Filtering</span>
<span class="sd">    ----------</span>
<span class="sd">    subscriptions : enums.Membership</span>
<span class="sd">        The subscription system of the group (private, invitation)</span>
<span class="sd">    category : enums.GroupCategory</span>
<span class="sd">        The category of the group (funny, literature)</span>

<span class="sd">    Attributes</span>
<span class="sd">    -----------</span>
<span class="sd">    name : str</span>
<span class="sd">        The name of the group</span>
<span class="sd">    private : bool</span>
<span class="sd">        Whether or not the group is private</span>
<span class="sd">    profile : Profile</span>
<span class="sd">        The profile object for the group</span>
<span class="sd">    stats : Statistics</span>
<span class="sd">        The stats of the Group</span>
<span class="sd">    tags : dict{str, str}</span>
<span class="sd">        A dictionnary of tags where the key is the tag name and the value is the tag url</span>
<span class="sd">    embed : str</span>
<span class="sd">        The html for athe group embed</span>
<span class="sd">    medias : List[Thumbnail]</span>
<span class="sd">        A list of media like thumbnail objects representing all the images, videos and audio</span>
<span class="sd">        clips that a group has published.</span>
<span class="sd">    suggestions : List[Thumbnail]</span>
<span class="sd">        A list of group like thumbnail objects representing the suggestions made by moddb to</span>
<span class="sd">        users visiting this group</span>
<span class="sd">    articles : List[Thumbnail]</span>
<span class="sd">        A list of article like thumbnail objects representing some of the articles published</span>
<span class="sd">        by the group</span>
<span class="sd">    description : str</span>
<span class="sd">        The plaintext description of the group</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html</span> <span class="p">:</span> <span class="n">bs4</span><span class="o">.</span><span class="n">BeautifulSoup</span><span class="p">):</span>
        <span class="c1">#ToDo</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;title&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">h2</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">string</span>
        <span class="n">Base</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">private</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">profile</span> <span class="o">=</span> <span class="n">Profile</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Entity </span><span class="si">%s</span><span class="s2"> has no profile (private)&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">profile</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">private</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stats</span> <span class="o">=</span> <span class="n">Statistics</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Entity </span><span class="si">%s</span><span class="s2"> has no stats (private)&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stats</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">raw_tags</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;form&quot;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;tagsform&quot;</span><span class="p">})</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tags</span> <span class="o">=</span> <span class="p">{</span><span class="n">x</span><span class="o">.</span><span class="n">string</span> <span class="p">:</span> <span class="n">join</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">])</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">raw_tags</span> <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">string</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">}</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Entity </span><span class="si">%s</span><span class="s2"> has no tags (private)&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tags</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">embed</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;input&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;text&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;text textembed&quot;</span><span class="p">)[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">embed</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">html</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;textarea&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">a</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Group </span><span class="si">%s</span><span class="s2"> has no embed&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">embed</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">suggestions</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_suggestions</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">articles_raw</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="s2">&quot;Articles&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;table&quot;</span><span class="p">)</span>
            <span class="n">thumbnails</span> <span class="o">=</span> <span class="n">articles_raw</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;row rowcontent clear&quot;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">articles</span> <span class="o">=</span> <span class="p">[</span><span class="n">Thumbnail</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span> <span class="n">url</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">],</span> <span class="n">image</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">img</span><span class="p">[</span><span class="s2">&quot;src&quot;</span><span class="p">],</span> <span class="nb">type</span><span class="o">=</span><span class="n">ThumbnailType</span><span class="o">.</span><span class="n">article</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">thumbnails</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Group </span><span class="si">%s</span><span class="s2"> has no article suggestions&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">articles</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;profiledescription&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;column span-all&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;tooltip&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">text</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">medias</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_media</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">html</span><span class="o">=</span><span class="n">html</span><span class="p">)</span>

        <span class="c1">#ToDo: add:</span>
        <span class="c1">#   - font page article</span>
        <span class="c1">#   - group category</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">f</span><span class="s2">&quot;&lt;Group name=</span><span class="si">{self.name}</span><span class="s2">&gt;&quot;</span></div>

<div class="viewcode-block" id="Team"><a class="viewcode-back" href="../../pages.html#moddb.pages.Team">[docs]</a><span class="nd">@concat_docs</span>
<span class="k">class</span> <span class="nc">Team</span><span class="p">(</span><span class="n">Group</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A team is a group of people, which are the author of a game, a mod or an engine. A group has members which all</span>
<span class="sd">    have rights on those page. Like a user but instead of a single person authoring various mods and games it&#39;s several.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ------------</span>
<span class="sd">    html : bs4.BeautifulSoup</span>
<span class="sd">        The html to parse. Allows for finer control.</span>

<span class="sd">    Filtering</span>
<span class="sd">    ----------</span>
<span class="sd">    subscriptions : enums.Membership</span>
<span class="sd">        The subscription system of the company (private, invitation)</span>
<span class="sd">    category : enums.TeamCategory</span>
<span class="sd">        What does the team do (publisher, developer)</span>

<span class="sd">    Attributes</span>
<span class="sd">    -----------</span>
<span class="sd">    games : List[Thumbnail]</span>
<span class="sd">        A list of game like thumbnails that the team has authored.</span>
<span class="sd">    engines : List[Thumbnail]</span>
<span class="sd">        A list of engine like objects that the team has authored.     </span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1">#Todo: possibly need high level get_engines and get_games</span>
    <span class="c1">#Todo: teams can&#39;t author mods? might need different inheritance</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html</span> <span class="p">:</span> <span class="n">bs4</span><span class="o">.</span><span class="n">BeautifulSoup</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">games</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_games</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Group </span><span class="si">%s</span><span class="s2"> has no games&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">games</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">engines</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_engines</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Group </span><span class="si">%s</span><span class="s2"> has no engines&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">engines</span> <span class="o">=</span> <span class="p">[]</span></div>

<div class="viewcode-block" id="Job"><a class="viewcode-back" href="../../pages.html#moddb.pages.Job">[docs]</a><span class="nd">@concat_docs</span>
<span class="k">class</span> <span class="nc">Job</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Model representing a job proposed on ModDB</span>
<span class="sd">    </span>
<span class="sd">    Parameters</span>
<span class="sd">    -----------</span>
<span class="sd">    html : bs4.BeautifulSoup</span>
<span class="sd">        The html to parse. Allows for finer control.</span>

<span class="sd">    Attributes</span>
<span class="sd">    -----------</span>
<span class="sd">    id : int</span>
<span class="sd">        id of the job</span>
<span class="sd">    author : Thumbnail</span>
<span class="sd">        A user like thumbnail representing the poster of the job</span>
<span class="sd">    paid : bool</span>
<span class="sd">        Whether or not the job is paid</span>
<span class="sd">    tags : dict{str : str}</span>
<span class="sd">        A dict of key-values pair where the key is the name of the tag and the value is the url.</span>
<span class="sd">    skill : JobSkill</span>
<span class="sd">        the skill demanded for the job</span>
<span class="sd">    location : str</span>
<span class="sd">        The location the job will be at</span>
<span class="sd">    name : str</span>
<span class="sd">        The name of the job</span>
<span class="sd">    text : str</span>
<span class="sd">        The description of the job</span>
<span class="sd">    related : List[Thumbnail]</span>
<span class="sd">        A list of team like thumbnails of companies related to the job poster</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1">#ToDo: can a job have comments</span>
    <span class="c1">#ToDo: look into this one again...</span>
    <span class="c1">#ToDo: do jobs have search parameters?</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html</span> <span class="p">:</span> <span class="n">bs4</span><span class="o">.</span><span class="n">BeautifulSoup</span><span class="p">):</span>
        <span class="n">text_raw</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;readarticle&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">text_raw</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;title&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;heading&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">string</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">text_raw</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;articlecontent&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>

        <span class="n">profile_raw</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="s2">&quot;Jobs&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;table tablemenu&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;siteareaid=(\d*)&quot;</span><span class="p">,</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="s2">&quot;Report&quot;</span><span class="p">)[</span><span class="s2">&quot;href&quot;</span><span class="p">])[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">author</span> <span class="o">=</span> <span class="n">profile_raw</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;h5&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="s2">&quot;Author&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">span</span><span class="o">.</span><span class="n">a</span>

        <span class="c1">#ToDo: can author be team</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">author</span> <span class="o">=</span> <span class="n">Thumbnail</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">author</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="n">author</span><span class="o">.</span><span class="n">string</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">ThumbnailType</span><span class="o">.</span><span class="n">user</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">paid</span> <span class="o">=</span> <span class="n">profile_raw</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;h5&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="s2">&quot;Paid&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">string</span> <span class="o">==</span> <span class="s2">&quot;Yes&quot;</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">raw_tags</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;form&quot;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;tagsform&quot;</span><span class="p">})</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tags</span> <span class="o">=</span> <span class="p">{</span><span class="n">x</span><span class="o">.</span><span class="n">string</span> <span class="p">:</span> <span class="n">join</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">])</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">raw_tags</span> <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">string</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">}</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tags</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> has no tags&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">skill</span> <span class="o">=</span> <span class="n">JobSkill</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">profile_raw</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;h5&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="s2">&quot;Skill&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">span</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">location</span> <span class="o">=</span> <span class="n">profile_raw</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;h5&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="s2">&quot;Location&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">span</span><span class="o">.</span><span class="n">string</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="n">related</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;tablerelated&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;image&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">related</span> <span class="o">=</span> <span class="p">[</span><span class="n">Thumbnail</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">x</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="n">x</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span> <span class="nb">type</span><span class="o">=</span><span class="n">ThumbnailType</span><span class="o">.</span><span class="n">team</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">related</span><span class="p">]</span></div>

<div class="viewcode-block" id="Blog"><a class="viewcode-back" href="../../pages.html#moddb.pages.Blog">[docs]</a><span class="nd">@concat_docs</span>
<span class="k">class</span> <span class="nc">Blog</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Object used to represent a user blog.</span>

<span class="sd">    Filtering</span>
<span class="sd">    ----------</span>
<span class="sd">    timeframe : enums.TimeFrame</span>
<span class="sd">        The time period this was released in (last 24hr, last week, last month)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1">#ToDo: this one needs a second check, atm it&#39;s only meant to be parsed from the blog list</span>
    <span class="c1">#it probably has comments and stuff, idk just fuck my shit up fam</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">heading</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
        <span class="n">author</span> <span class="o">=</span> <span class="n">heading</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;subheading&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">a</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">author</span> <span class="o">=</span> <span class="n">Thumbnail</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">author</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="n">author</span><span class="o">.</span><span class="n">string</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">ThumbnailType</span><span class="o">.</span><span class="n">user</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="n">get_date</span><span class="p">(</span><span class="n">heading</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;date&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">time</span><span class="p">[</span><span class="s2">&quot;datetime&quot;</span><span class="p">])</span>

        <span class="n">title</span> <span class="o">=</span> <span class="n">heading</span><span class="o">.</span><span class="n">div</span><span class="o">.</span><span class="n">h4</span><span class="o">.</span><span class="n">a</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">title</span><span class="o">.</span><span class="n">string</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">title</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">html</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plaintext</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">text</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">f</span><span class="s2">&quot;&lt;Blog title=</span><span class="si">{self.name}</span><span class="s2">&gt;&quot;</span></div>

<div class="viewcode-block" id="User"><a class="viewcode-back" href="../../pages.html#moddb.pages.User">[docs]</a><span class="nd">@concat_docs</span>
<span class="k">class</span> <span class="nc">User</span><span class="p">(</span><span class="n">Page</span><span class="p">,</span> <span class="n">GetGamesMetaClass</span><span class="p">,</span> <span class="n">GetModsMetaClass</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The object to represent an individual user on ModDB</span>

<span class="sd">    Parameters</span>
<span class="sd">    -----------</span>
<span class="sd">    html : bs4.BeautifulSoup</span>
<span class="sd">        The html to parse. Allows for finer control.</span>

<span class="sd">    Attributes</span>
<span class="sd">    -----------</span>
<span class="sd">    profile : UserProfile</span>
<span class="sd">        Since user profile boxes have no overlap with other profiles, they are a separate object type</span>
<span class="sd">        but serve the same function of making the side box &quot;Profile&quot; into an object, except exclusively</span>
<span class="sd">        for a user page.</span>
<span class="sd">    stats : UserStatistics</span>
<span class="sd">        Since user statistics have no overlap with regular statistic pages, they are a separate object type</span>
<span class="sd">        but serve the same function of making the side box &quot;Statistics&quot; into an object, but exclusively for</span>
<span class="sd">        the user page.</span>
<span class="sd">    description : str</span>
<span class="sd">        Description written on the user profile</span>
<span class="sd">    groups : List[Thumbnail]</span>
<span class="sd">        A list of group/team like thumbnail objects representing both the Teams the user is part of and the</span>
<span class="sd">        Groups the user is part of.</span>
<span class="sd">    blog : Blog</span>
<span class="sd">        The front page blog shown on the user page</span>
<span class="sd">    blogs : List[Thumbnail]</span>
<span class="sd">        A list of blog like thumbnails representing the blog suggestion of a user&#39;s frontpage</span>
<span class="sd">    friends : List[Thumnails]</span>
<span class="sd">        A list of user like thumbnails representing some of the friends shown on the user&#39;s front</span>
<span class="sd">        page</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html</span> <span class="p">:</span> <span class="n">bs4</span><span class="o">.</span><span class="n">BeautifulSoup</span><span class="p">):</span>
        <span class="c1">#Todo: can users have engines?</span>
        <span class="c1">#ToDo: check for differences between a user page vs user page of logged in user</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">profile</span> <span class="o">=</span> <span class="n">UserProfile</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stats</span> <span class="o">=</span> <span class="n">UserStatistics</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;profiledescription&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">string</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="c1">#ToDo: don&#39;t hardcode thumbnails type, piggy back off url</span>
            <span class="n">groups_raw</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="s2">&quot;Groups&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;table&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">)[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">groups</span> <span class="o">=</span> <span class="p">[</span><span class="n">Thumbnail</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">div</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span> <span class="n">url</span><span class="o">=</span><span class="n">div</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">],</span> <span class="nb">type</span><span class="o">=</span><span class="n">ThumbnailType</span><span class="o">.</span><span class="n">group</span><span class="p">)</span> <span class="k">for</span> <span class="n">div</span> <span class="ow">in</span> <span class="n">groups_raw</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;User </span><span class="si">%s</span><span class="s2"> doesn&#39;t have any groups&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">groups</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1">#Todo: still works?</span>
        <span class="n">blogs_raw</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="s2">&quot;My Blogs&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;table&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">blogs_raw</span> <span class="o">=</span> <span class="n">blogs_raw</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">blog</span> <span class="o">=</span> <span class="n">Blog</span><span class="p">(</span><span class="n">heading</span><span class="o">=</span><span class="n">blogs_raw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">text</span><span class="o">=</span><span class="n">blogs_raw</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">blog</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;User </span><span class="si">%s</span><span class="s2"> has no front page blog&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">blogs_raw</span> <span class="o">=</span> <span class="n">blogs_raw</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">blogs</span> <span class="o">=</span> <span class="p">[</span><span class="n">Thumbnail</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">blog</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span> <span class="n">url</span><span class="o">=</span><span class="n">blog</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">],</span> <span class="nb">type</span><span class="o">=</span><span class="n">ThumbnailType</span><span class="o">.</span><span class="n">blog</span><span class="p">)</span> <span class="k">for</span> <span class="n">blog</span> <span class="ow">in</span> <span class="n">blogs_raw</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]]</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">AttributeError</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">blogs</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;User </span><span class="si">%s</span><span class="s2"> has no blog suggestions&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">friends</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;table tablerelated&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">)[</span><span class="mi">1</span><span class="p">:]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">friends</span> <span class="o">=</span> <span class="p">[</span><span class="n">Thumbnail</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">friend</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span> <span class="n">url</span><span class="o">=</span><span class="n">friend</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">],</span> <span class="nb">type</span><span class="o">=</span><span class="n">ThumbnailType</span><span class="o">.</span><span class="n">user</span><span class="p">)</span> <span class="k">for</span> <span class="n">friend</span> <span class="ow">in</span> <span class="n">friends</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">friends</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;User </span><span class="si">%s</span><span class="s2"> has no friends ;(&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">f</span><span class="s2">&quot;&lt;User name=</span><span class="si">{self.name}</span><span class="s2"> level=</span><span class="si">{self.profile.level}</span><span class="s2">&gt;&quot;</span>

<div class="viewcode-block" id="User.get_blogs"><a class="viewcode-back" href="../../pages.html#moddb.pages.User.get_blogs">[docs]</a>    <span class="k">def</span> <span class="nf">get_blogs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span> <span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">query</span> <span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">timeframe</span> <span class="p">:</span> <span class="n">TimeFrame</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> 
                  <span class="n">sort</span> <span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="s2">&quot;Blog&quot;</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Search through a user&#39;s blogs one page at a time with certain filters.</span>

<span class="sd">        Parameters</span>
<span class="sd">        -----------</span>
<span class="sd">        index : int</span>
<span class="sd">            The page index you wish to get the blogs for, allows to hop around.</span>
<span class="sd">        timeframe : Timeframe</span>
<span class="sd">            The date the blog was added, optional</span>
<span class="sd">        query : str</span>
<span class="sd">            The string to look for in the blog title, optional.</span>
<span class="sd">        sort : Tuple[str, str]</span>
<span class="sd">            The sorting tuple to sort by</span>

<span class="sd">        Returns</span>
<span class="sd">        --------</span>
<span class="sd">        List[Blog]</span>
<span class="sd">            The list of blogs on this page. </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;filter&quot;</span><span class="p">:</span> <span class="s2">&quot;t&quot;</span><span class="p">,</span>
            <span class="s2">&quot;kw&quot;</span><span class="p">:</span> <span class="n">query</span><span class="p">,</span>
            <span class="s2">&quot;timeframe&quot;</span><span class="p">:</span> <span class="n">timeframe</span><span class="o">.</span><span class="n">value</span> <span class="k">if</span> <span class="n">timeframe</span> <span class="k">else</span> <span class="kc">None</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_blogs</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span></div>

<div class="viewcode-block" id="User.get_user_comments"><a class="viewcode-back" href="../../pages.html#moddb.pages.User.get_user_comments">[docs]</a>    <span class="k">def</span> <span class="nf">get_user_comments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span> <span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CommentList</span><span class="p">:</span>
        <span class="sd">&quot;&quot;&quot;Gets a page of all the comments a user has posted.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        -----------</span>
<span class="sd">        index : int</span>
<span class="sd">            The page number to get the comments from.</span>

<span class="sd">        Returns</span>
<span class="sd">        --------</span>
<span class="sd">        CommentList</span>
<span class="sd">            A list of comments.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">html</span> <span class="o">=</span> <span class="n">soup</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;</span><span class="si">{self.url}</span><span class="s2">/comments/page/</span><span class="si">{index}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_comments</span><span class="p">(</span><span class="n">html</span><span class="p">)</span></div>

<div class="viewcode-block" id="User.get_friends"><a class="viewcode-back" href="../../pages.html#moddb.pages.User.get_friends">[docs]</a>    <span class="k">def</span> <span class="nf">get_friends</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span> <span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Thumbnail</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get a page of the friends of the user</span>
<span class="sd">    </span>
<span class="sd">        Parameters</span>
<span class="sd">        -----------</span>
<span class="sd">        index : int</span>
<span class="sd">            The page number to get the friends from.</span>

<span class="sd">        Returns</span>
<span class="sd">        --------</span>
<span class="sd">        List[Thumbnails]</span>
<span class="sd">            A list of user like thumbnails of the user&#39;s friends</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;</span><span class="si">{self.url}</span><span class="s2">/friends/page/</span><span class="si">{index}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">ThumbnailType</span><span class="o">.</span><span class="n">user</span><span class="p">)</span></div>

<div class="viewcode-block" id="User.get_groups"><a class="viewcode-back" href="../../pages.html#moddb.pages.User.get_groups">[docs]</a>    <span class="k">def</span> <span class="nf">get_groups</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">index</span> <span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Thumbnail</span><span class="p">]:</span>
        <span class="sd">&quot;&quot;&quot;Get a page of the groups and teams a user is part of.</span>
<span class="sd">        </span>
<span class="sd">        Parameters</span>
<span class="sd">        -----------</span>
<span class="sd">        index : int</span>
<span class="sd">            The page number to get the friends from.</span>

<span class="sd">        Returns</span>
<span class="sd">        --------</span>
<span class="sd">        List[Thumbnails]</span>
<span class="sd">            A list of team/group like thumbnails the user is part of</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;</span><span class="si">{self.url}</span><span class="s2">/groups/page/</span><span class="si">{index}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">ThumbnailType</span><span class="o">.</span><span class="n">group</span><span class="p">)</span></div></div>

<div class="viewcode-block" id="FrontPage"><a class="viewcode-back" href="../../pages.html#moddb.pages.FrontPage">[docs]</a><span class="nd">@concat_docs</span>
<span class="k">class</span> <span class="nc">FrontPage</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;An object representing the front page of  More of less just a long suggestion of the hottest mods,</span>
<span class="sd">    games, articles and files of the moment</span>

<span class="sd">    Parameters</span>
<span class="sd">    -----------</span>
<span class="sd">    html : bs4.BeautifulSoup</span>
<span class="sd">        The html to parse. Allows for finer control.</span>

<span class="sd">    Attributes</span>
<span class="sd">    -----------</span>
<span class="sd">    articles : List[Thumbnail]</span>
<span class="sd">        A list of article like thumbnail objects representing the suggested</span>
<span class="sd">        articles on the front page.</span>
<span class="sd">    mods : List[Thumbnail]</span>
<span class="sd">        A list of mod like thumbnail objects representing the suggested</span>
<span class="sd">        mods on the front page.</span>
<span class="sd">    games : List[Thumbnail]</span>
<span class="sd">        A list of game like thumbnail objects representing the suggested</span>
<span class="sd">        games on the front page.</span>
<span class="sd">    files : List[Thumbnail]</span>
<span class="sd">        A list of file like thumbnail objects representing the suggested</span>
<span class="sd">        files on the front page.</span>
<span class="sd">    poll : Poll</span>
<span class="sd">        The current ongoing moddb poll. Currently cannot be voted on.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html</span> <span class="p">:</span> <span class="n">bs4</span><span class="o">.</span><span class="n">BeautifulSoup</span><span class="p">):</span>
        <span class="c1">#ToDo: add promoted content of slider</span>
        <span class="n">articles</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="s2">&quot;Latest Articles&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;table&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">)[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">articles</span> <span class="o">=</span> <span class="p">[</span><span class="n">Thumbnail</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span> <span class="n">url</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">],</span> <span class="nb">type</span><span class="o">=</span><span class="n">ThumbnailType</span><span class="o">.</span><span class="n">article</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">img</span><span class="p">[</span><span class="s2">&quot;src&quot;</span><span class="p">])</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">articles</span><span class="p">]</span>

        <span class="n">mods</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="s2">&quot;Popular Mods&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;table&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">)[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mods</span> <span class="o">=</span> <span class="p">[</span><span class="n">Thumbnail</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span> <span class="n">url</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">],</span> <span class="nb">type</span><span class="o">=</span><span class="n">ThumbnailType</span><span class="o">.</span><span class="n">mod</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">img</span><span class="p">[</span><span class="s2">&quot;src&quot;</span><span class="p">])</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">mods</span><span class="p">]</span>

        <span class="n">games</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="s2">&quot;Popular Games&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;table&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">)[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">games</span> <span class="o">=</span> <span class="p">[</span><span class="n">Thumbnail</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span> <span class="n">url</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">],</span> <span class="nb">type</span><span class="o">=</span><span class="n">ThumbnailType</span><span class="o">.</span><span class="n">game</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">img</span><span class="p">[</span><span class="s2">&quot;src&quot;</span><span class="p">])</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">games</span><span class="p">]</span>

        <span class="c1">#ToDo: prehaps url can be obtained from parsing the name and joining it with the the base url</span>
        <span class="c1"># jobs = html.find(&quot;span&quot;, string=&quot;Jobs&quot;).parent.parent.parent.find(&quot;div&quot;, class_=&quot;table&quot;).find_all(&quot;div&quot;, recursive=False)[1:]</span>
        <span class="c1"># self.jobs = [Thumbnail(name=x.a[&quot;title&quot;], url=x.a[&quot;href&quot;], type=ThumbnailType.job) for x in jobs]</span>

        <span class="n">files</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="s2">&quot;Popular Files&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;table&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">)[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="n">Thumbnail</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span> <span class="n">url</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">],</span> <span class="nb">type</span><span class="o">=</span><span class="n">ThumbnailType</span><span class="o">.</span><span class="n">file</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">img</span><span class="p">[</span><span class="s2">&quot;src&quot;</span><span class="p">])</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">files</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">poll</span> <span class="o">=</span> <span class="n">Poll</span><span class="p">(</span><span class="n">soup</span><span class="p">(</span><span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;poll&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">form</span><span class="p">[</span><span class="s2">&quot;action&quot;</span><span class="p">]))</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">f</span><span class="s2">&quot;&lt;FrontPage articles={len(self.articles)} mods={len(self.mods)} games={len(self.games)} files={len(self.files)}&gt;&quot;</span></div>

<div class="viewcode-block" id="Platform"><a class="viewcode-back" href="../../pages.html#moddb.pages.Platform">[docs]</a><span class="nd">@concat_docs</span>
<span class="k">class</span> <span class="nc">Platform</span><span class="p">(</span><span class="n">Base</span><span class="p">,</span> <span class="n">GetModsMetaClass</span><span class="p">,</span> <span class="n">GetGamesMetaClass</span><span class="p">,</span> <span class="n">GetEnginesMetaClass</span><span class="p">,</span> <span class="n">GetSoftwareHardwareMetaClass</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Represents the platform supporting the game/engines. Game and engines may have mutiple platforms.</span>

<span class="sd">    Parameters</span>
<span class="sd">    -----------</span>
<span class="sd">    html : bs4.BeautifulSoup</span>
<span class="sd">        The html to parse. Allows for finer control.</span>

<span class="sd">    Attributes</span>
<span class="sd">    -----------</span>
<span class="sd">    name : str</span>
<span class="sd">        The name of the platform</span>
<span class="sd">    id : int</span>
<span class="sd">        The moddb id of the platform</span>
<span class="sd">    url : str</span>
<span class="sd">        The url of the platform page</span>
<span class="sd">    description : str</span>
<span class="sd">        Description of the platform</span>
<span class="sd">    company : Thumbnail</span>
<span class="sd">        A team like thumbnail of the company.</span>
<span class="sd">    homepage : str</span>
<span class="sd">        Link to the homepage of the engine</span>
<span class="sd">    date : datetime.datetime</span>
<span class="sd">        Date the engine was published</span>
<span class="sd">    stats : PlatformStatistics</span>
<span class="sd">        Stat data on the platform</span>
<span class="sd">    share : dict{str : str}</span>
<span class="sd">        Share link of the platform with the name of the share as key and link of the share as url.</span>
<span class="sd">    comments : CommentList</span>
<span class="sd">        Comments on this page</span>
<span class="sd">    games : List[Thumbnail]</span>
<span class="sd">        A list of games suggested on the platform main page.</span>
<span class="sd">    hardware : List[Thumbnail]</span>
<span class="sd">        A list of hardware suggested on the platform main page.</span>
<span class="sd">    software : List[Thumbnail]</span>
<span class="sd">        A list of software suggested on the platform main page.</span>
<span class="sd">    engines : List[Thumbnail]</span>
<span class="sd">        A list of engines suggested on the platform main page.</span>
<span class="sd">    mods : List[Thumbnail]</span>
<span class="sd">        A list of mods suggested on the platform main page.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html</span><span class="p">):</span>
        <span class="c1">#test with all platforms</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="n">itemprop</span><span class="o">=</span><span class="s2">&quot;mainEntityOfPage&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">string</span>
        
        <span class="c1">#ToDo: check if possible</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="kc">None</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">join</span><span class="p">(</span><span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="n">itemprop</span><span class="o">=</span><span class="s2">&quot;mainEntityOfPage&quot;</span><span class="p">)[</span><span class="s2">&quot;href&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;profiledescription&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">string</span>

        <span class="n">company</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;h5&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="s2">&quot;Company&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">span</span><span class="o">.</span><span class="n">a</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">company</span> <span class="o">=</span> <span class="n">Thumbnail</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">company</span><span class="o">.</span><span class="n">string</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="n">company</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">],</span> <span class="nb">type</span><span class="o">=</span><span class="n">ThumbnailType</span><span class="o">.</span><span class="n">team</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">homepage</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;h5&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="s2">&quot;Homepage&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">span</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="n">get_date</span><span class="p">(</span><span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;time&quot;</span><span class="p">,</span> <span class="n">itemprop</span><span class="o">=</span><span class="s2">&quot;releaseDate&quot;</span><span class="p">)[</span><span class="s2">&quot;datetime&quot;</span><span class="p">])</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">stats</span> <span class="o">=</span> <span class="n">PlatformStatistics</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">share</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;h5&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="s2">&quot;Share&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">span</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">share</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;reddit&quot;</span><span class="p">:</span> <span class="n">share</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;href&quot;</span><span class="p">],</span>
                <span class="s2">&quot;mail&quot;</span><span class="p">:</span> <span class="n">share</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s2">&quot;href&quot;</span><span class="p">],</span>
                <span class="s2">&quot;twitter&quot;</span><span class="p">:</span> <span class="n">share</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="s2">&quot;href&quot;</span><span class="p">],</span>
                <span class="s2">&quot;facebook&quot;</span><span class="p">:</span> <span class="n">share</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="s2">&quot;href&quot;</span><span class="p">]</span>
            <span class="p">}</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="c1">#ToDo: log dis</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">share</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">comments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_comments</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        
        <span class="n">hardware</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="s2">&quot; Hardware&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;table&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">)[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hardware</span> <span class="o">=</span> <span class="p">[</span><span class="n">Thumbnail</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span> <span class="n">url</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">],</span> <span class="nb">type</span><span class="o">=</span><span class="n">ThumbnailType</span><span class="o">.</span><span class="n">hardware</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">img</span><span class="p">[</span><span class="s2">&quot;src&quot;</span><span class="p">])</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">hardware</span><span class="p">]</span>

        <span class="n">software</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="s2">&quot; Software&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;table&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">)[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">software</span> <span class="o">=</span> <span class="p">[</span><span class="n">Thumbnail</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span> <span class="n">url</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">],</span> <span class="nb">type</span><span class="o">=</span><span class="n">ThumbnailType</span><span class="o">.</span><span class="n">software</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">img</span><span class="p">[</span><span class="s2">&quot;src&quot;</span><span class="p">])</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">software</span><span class="p">]</span>

        <span class="n">engines</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="s2">&quot; Engines&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;table&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">)[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">engines</span> <span class="o">=</span> <span class="p">[</span><span class="n">Thumbnail</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span> <span class="n">url</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">],</span> <span class="nb">type</span><span class="o">=</span><span class="n">ThumbnailType</span><span class="o">.</span><span class="n">engine</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">img</span><span class="p">[</span><span class="s2">&quot;src&quot;</span><span class="p">])</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">engines</span><span class="p">]</span>

        <span class="n">mods</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="s2">&quot; Mods&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;table&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">)[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mods</span> <span class="o">=</span> <span class="p">[</span><span class="n">Thumbnail</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span> <span class="n">url</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">],</span> <span class="nb">type</span><span class="o">=</span><span class="n">ThumbnailType</span><span class="o">.</span><span class="n">mod</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">img</span><span class="p">[</span><span class="s2">&quot;src&quot;</span><span class="p">])</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">mods</span><span class="p">]</span>

        <span class="n">games</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="s2">&quot; Games&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;table&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">)[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">games</span> <span class="o">=</span> <span class="p">[</span><span class="n">Thumbnail</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span> <span class="n">url</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">],</span> <span class="nb">type</span><span class="o">=</span><span class="n">ThumbnailType</span><span class="o">.</span><span class="n">game</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">img</span><span class="p">[</span><span class="s2">&quot;src&quot;</span><span class="p">])</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">games</span><span class="p">]</span>


    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">f</span><span class="s2">&quot;&lt;Platform name=</span><span class="si">{self.name}</span><span class="s2">&gt;&quot;</span></div>

<span class="k">class</span> <span class="nc">Tutorial</span><span class="p">:</span>
    <span class="c1">#ToDo: check if unique or can be replaced with Article</span>
    <span class="k">pass</span>

<div class="viewcode-block" id="Hardware"><a class="viewcode-back" href="../../pages.html#moddb.pages.Hardware">[docs]</a><span class="nd">@concat_docs</span>
<span class="k">class</span> <span class="nc">Hardware</span><span class="p">(</span><span class="n">Base</span><span class="p">,</span> <span class="n">GetGamesMetaClass</span><span class="p">,</span> <span class="n">SharedMethodsMetaClass</span><span class="p">,</span> <span class="n">GetSoftwareHardwareMetaClass</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A moddb.hardware&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="s2">&quot;profiledescription&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">p</span><span class="o">.</span><span class="n">string</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">profile</span> <span class="o">=</span> <span class="n">Profile</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stats</span> <span class="o">=</span> <span class="n">Statistics</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rating</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;score&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;meta&quot;</span><span class="p">,</span> <span class="n">itemprop</span><span class="o">=</span><span class="s2">&quot;ratingValue&quot;</span><span class="p">)[</span><span class="s2">&quot;content&quot;</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rating</span> <span class="o">=</span> <span class="mf">0.0</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> is not rated&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">profile</span><span class="o">.</span><span class="n">category</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="n">hardware</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="s2">&quot;Hardware&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;table&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">)[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hardware</span> <span class="o">=</span> <span class="p">[</span><span class="n">Thumbnail</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span> <span class="n">url</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">],</span> <span class="nb">type</span><span class="o">=</span><span class="n">ThumbnailType</span><span class="o">.</span><span class="n">hardware</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">img</span><span class="p">[</span><span class="s2">&quot;src&quot;</span><span class="p">])</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">hardware</span><span class="p">]</span>

        <span class="n">software</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="s2">&quot;Software&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;table&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">)[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">software</span> <span class="o">=</span> <span class="p">[</span><span class="n">Thumbnail</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span> <span class="n">url</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">],</span> <span class="nb">type</span><span class="o">=</span><span class="n">ThumbnailType</span><span class="o">.</span><span class="n">software</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">img</span><span class="p">[</span><span class="s2">&quot;src&quot;</span><span class="p">])</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">software</span><span class="p">]</span>

        <span class="n">games</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="s2">&quot;Games&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;table&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">recursive</span><span class="o">=</span><span class="kc">False</span><span class="p">)[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">games</span> <span class="o">=</span> <span class="p">[</span><span class="n">Thumbnail</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span> <span class="n">url</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">],</span> <span class="nb">type</span><span class="o">=</span><span class="n">ThumbnailType</span><span class="o">.</span><span class="n">game</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">img</span><span class="p">[</span><span class="s2">&quot;src&quot;</span><span class="p">])</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">games</span><span class="p">]</span>

        <span class="c1">#ToDo: no mods?</span>

        <span class="n">articles_raw</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">articles_raw</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="s2">&quot;Related Articles&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;table&quot;</span><span class="p">)</span>
            <span class="n">thumbnails</span> <span class="o">=</span> <span class="n">articles_raw</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;row rowcontent clear&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">articles</span> <span class="o">=</span> <span class="p">[</span><span class="n">Thumbnail</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span> <span class="n">url</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">],</span> <span class="n">image</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">img</span><span class="p">[</span><span class="s2">&quot;src&quot;</span><span class="p">]</span> <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">a</span><span class="o">.</span><span class="n">img</span> <span class="k">else</span> <span class="kc">None</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">ThumbnailType</span><span class="o">.</span><span class="n">article</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">thumbnails</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> has no article suggestions&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">profile</span><span class="o">.</span><span class="n">category</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">articles</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1">#main page article</span>
        <span class="k">if</span> <span class="n">articles_raw</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">article</span> <span class="o">=</span> <span class="n">PartialArticle</span><span class="p">(</span><span class="n">articles_raw</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">article</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2"> has no front page article&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">profile</span><span class="o">.</span><span class="n">category</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">raw_tags</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;form&quot;</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;tagsform&quot;</span><span class="p">})</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tags</span> <span class="o">=</span> <span class="p">{</span><span class="n">x</span><span class="o">.</span><span class="n">string</span> <span class="p">:</span> <span class="n">join</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">])</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">raw_tags</span> <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">string</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">}</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tags</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="n">LOGGER</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Hardware </span><span class="si">%s</span><span class="s2"> has no tags&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> 

        <span class="bp">self</span><span class="o">.</span><span class="n">medias</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_media</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">html</span><span class="o">=</span><span class="n">html</span><span class="p">)</span>

        <span class="n">history</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="s2">&quot;History&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;image&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">history</span> <span class="o">=</span> <span class="p">[</span><span class="n">Thumbnail</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">x</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="n">x</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span> <span class="nb">type</span><span class="o">=</span><span class="n">ThumbnailType</span><span class="o">.</span><span class="n">hardware</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">img</span><span class="p">[</span><span class="s2">&quot;src&quot;</span><span class="p">])</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">history</span><span class="p">]</span>

        <span class="n">recommended</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="s2">&quot;Recommended&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;image&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">recommended</span> <span class="o">=</span> <span class="p">[</span><span class="n">Thumbnail</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">x</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="n">x</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span> <span class="nb">type</span><span class="o">=</span><span class="n">ThumbnailType</span><span class="o">.</span><span class="n">hardware</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">img</span><span class="p">[</span><span class="s2">&quot;src&quot;</span><span class="p">])</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">recommended</span><span class="p">]</span>

        <span class="n">suggestions</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,</span> <span class="n">string</span><span class="o">=</span><span class="s2">&quot;You may also like&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;image&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">suggestions</span> <span class="o">=</span> <span class="p">[</span><span class="n">Thumbnail</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">x</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="n">x</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">],</span> <span class="nb">type</span><span class="o">=</span><span class="n">ThumbnailType</span><span class="o">.</span><span class="n">hardware</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="n">x</span><span class="o">.</span><span class="n">img</span><span class="p">[</span><span class="s2">&quot;src&quot;</span><span class="p">])</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">suggestions</span><span class="p">]</span></div>

<span class="c1">#combine with software?</span>
<div class="viewcode-block" id="Software"><a class="viewcode-back" href="../../pages.html#moddb.pages.Software">[docs]</a><span class="k">class</span> <span class="nc">Software</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="c1">#ToDo</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">html</span><span class="p">)</span></div>


<div class="viewcode-block" id="Review"><a class="viewcode-back" href="../../pages.html#moddb.pages.Review">[docs]</a><span class="nd">@concat_docs</span>
<span class="k">class</span> <span class="nc">Review</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;Represents a review.</span>

<span class="sd">    Filtering</span>
<span class="sd">    -----------</span>
<span class="sd">    rating : int</span>
<span class="sd">        A value from 1 to 10 denoting the rating number you&#39;re looking for</span>

<span class="sd">    sitearea : Category</span>
<span class="sd">        The type of model the rating is for (mod, engine, game)</span>

<span class="sd">    Attributes</span>
<span class="sd">    -----------</span>
<span class="sd">    text : str</span>
<span class="sd">        The contents of the review. Can be none if the user hasn&#39;t left any</span>
<span class="sd">    rating : int</span>
<span class="sd">        An int out of 10 representing the rating left with this review.</span>
<span class="sd">    author : Thumbnail</span>
<span class="sd">        A user like thumbnail of the user who left the review</span>
<span class="sd">    date : datetime.datetime</span>
<span class="sd">        Date and time of the review creation</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">attrs</span><span class="p">):</span>
        <span class="n">text</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">text</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">text</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">review</span> <span class="o">=</span> <span class="n">attrs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;review&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">rating</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">review</span><span class="o">.</span><span class="n">span</span><span class="o">.</span><span class="n">string</span><span class="p">)</span>

        <span class="n">author</span> <span class="o">=</span> <span class="n">review</span><span class="o">.</span><span class="n">div</span><span class="o">.</span><span class="n">a</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">author</span> <span class="o">=</span> <span class="n">Thumbnail</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">author</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">],</span> <span class="n">name</span><span class="o">=</span><span class="n">author</span><span class="o">.</span><span class="n">string</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">type</span><span class="o">=</span><span class="n">ThumbnailType</span><span class="o">.</span><span class="n">user</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="n">get_date</span><span class="p">(</span><span class="n">review</span><span class="o">.</span><span class="n">div</span><span class="o">.</span><span class="n">span</span><span class="o">.</span><span class="n">time</span><span class="p">[</span><span class="s2">&quot;datetime&quot;</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">f</span><span class="s2">&quot;&lt;Review author=</span><span class="si">{self.author.name}</span><span class="s2"> rating=</span><span class="si">{self.rating}</span><span class="s2">&gt;&quot;</span></div>

<div class="viewcode-block" id="Poll"><a class="viewcode-back" href="../../pages.html#moddb.pages.Poll">[docs]</a><span class="nd">@concat_docs</span>
<span class="k">class</span> <span class="nc">Poll</span><span class="p">(</span><span class="n">Base</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Represents a poll available on the front page, more polls are available but most</span>
<span class="sd">    won&#39;t have the possibility to vote since they lack the option id necessary to cast a </span>
<span class="sd">    vote even through manual post requests. I don&#39;t think it would have cost much to add that</span>
<span class="sd">    into the poll page but for now it&#39;s like that. `vote` will raise an error if the user tries</span>
<span class="sd">    to cast it from a poll which was not gotten from the front page.</span>

<span class="sd">    Parameters</span>
<span class="sd">    -----------</span>
<span class="sd">    html : bs4.BeautifulSoup</span>
<span class="sd">        The html to parse. Allows for finer control.</span>

<span class="sd">    Attributes</span>
<span class="sd">    -----------</span>
<span class="sd">    question : str</span>
<span class="sd">        The question of the poll</span>
<span class="sd">    author : Thumbnail</span>
<span class="sd">        A user like thumbnail of the user who posted the poll, usually ModDB staff</span>
<span class="sd">    total : int</span>
<span class="sd">        The total number of votes that have been cast</span>
<span class="sd">    options : List[Option]</span>
<span class="sd">        The list of available options for the poll</span>
<span class="sd">    active : bool</span>
<span class="sd">        Whether the poll can be voted on.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html</span><span class="p">):</span>
        <span class="n">poll</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;poll&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">question</span> <span class="o">=</span> <span class="n">poll</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;normalcorner&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;span&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;heading&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">string</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">question</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>
        <span class="n">author</span> <span class="o">=</span> <span class="n">poll</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;question&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">author</span> <span class="o">=</span> <span class="n">Thumbnail</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">author</span><span class="o">.</span><span class="n">string</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="n">author</span><span class="p">[</span><span class="s2">&quot;href&quot;</span><span class="p">],</span> <span class="nb">type</span><span class="o">=</span><span class="n">ThumbnailType</span><span class="o">.</span><span class="n">user</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">total</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;([\d,]*) votes&quot;</span><span class="p">,</span> <span class="n">poll</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;question&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>

        <span class="n">percentage</span> <span class="o">=</span> <span class="n">poll</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">,</span> <span class="n">class_</span><span class="o">=</span><span class="s2">&quot;barouter&quot;</span><span class="p">)</span>
        <span class="n">rest</span> <span class="o">=</span> <span class="n">poll</span><span class="o">.</span><span class="n">find_all</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">active</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">percentage</span><span class="p">)):</span>
            <span class="n">raw</span> <span class="o">=</span> <span class="n">percentage</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="o">.</span><span class="n">div</span><span class="o">.</span><span class="n">string</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;%&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\xa0</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
            <span class="n">percent</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">f</span><span class="s2">&quot;0.</span><span class="si">{raw}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;\([\d,]* vote(s)?\)&quot;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">rest</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
            <span class="n">votes</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s2">&quot;([\d,]*) vote(s)?&quot;</span><span class="p">,</span> <span class="n">rest</span><span class="p">[</span><span class="n">x</span><span class="p">]</span><span class="o">.</span><span class="n">span</span><span class="o">.</span><span class="n">string</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Option</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span> <span class="n">votes</span><span class="o">=</span><span class="n">votes</span><span class="p">,</span> <span class="n">percent</span><span class="o">=</span><span class="n">percent</span><span class="p">))</span>

<div class="viewcode-block" id="Poll.make_active"><a class="viewcode-back" href="../../pages.html#moddb.pages.Poll.make_active">[docs]</a>    <span class="k">def</span> <span class="nf">make_active</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">path</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;This method attempts to make the poll active by checking the cached polls on the </span>
<span class="sd">        github repository. If the poll exists it get the ids of the options and set them as such</span>
<span class="sd">        then it will set the poll as active allowing users to vote on it.</span>

<span class="sd">        Parameters</span>
<span class="sd">        -----------</span>
<span class="sd">        path : str</span>
<span class="sd">            An optional path to a json file generated with poll.py</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cache</span> <span class="o">=</span> <span class="n">polls_json_file</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">options</span> <span class="o">=</span> <span class="n">cache</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">)]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="s2">&quot;This poll has not been cached&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">option</span> <span class="ow">in</span> <span class="n">options</span><span class="p">:</span>
            <span class="n">index</span> <span class="o">=</span> <span class="n">options</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">option</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">option</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">active</span> <span class="o">=</span> <span class="kc">True</span></div>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">f</span><span class="s2">&quot;&lt;Poll question=</span><span class="si">{self.question}</span><span class="s2">&gt;&quot;</span>

<div class="viewcode-block" id="Poll.vote"><a class="viewcode-back" href="../../pages.html#moddb.pages.Poll.vote">[docs]</a>    <span class="k">def</span> <span class="nf">vote</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">option</span> <span class="p">:</span> <span class="n">Option</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Vote for an option, if you are not logged in the vote will be cast as a guest. Currently</span>
<span class="sd">        not implemented. Polls can only be voted on if they have been obtained from the front page,</span>
<span class="sd">        since only those polls contain the option ids neccessary to cast the vote. The simplest way </span>
<span class="sd">        to know if this poll can be voted on is to check the `active` parameters which is True if the</span>
<span class="sd">        poll is currently open/active</span>

<span class="sd">        Parameters</span>
<span class="sd">        ------------</span>
<span class="sd">        option : Option</span>
<span class="sd">            The option you desire to vote for.</span>

<span class="sd">        Raises</span>
<span class="sd">        -------</span>
<span class="sd">        ValueError</span>
<span class="sd">            This poll is not active.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">active</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;This poll is not active&quot;</span><span class="p">)</span>

        <span class="n">r</span> <span class="o">=</span> <span class="n">request</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;poll&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="s2">&quot;option&quot;</span><span class="p">:</span> <span class="n">option</span><span class="o">.</span><span class="n">id</span><span class="p">}},</span> <span class="n">post</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">moddb</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../filtering&amp;sorting.html">Filtering and Sorting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../base.html">Key Functions &amp; Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pages.html">ModDB Pages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../boxes.html">ModDB Boxes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../utils.html">Utility Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../enums.html">ModDB Enums</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Module code</a><ul>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Clement Julia.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
    </div>

    

    
  </body>
</html>